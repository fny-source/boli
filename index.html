
<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>å·«æ°ä¿®ä»™ä¸–ç•ŒÂ·æ²‰æµ¸å¼å‰§æƒ…ç‰ˆV7</title>
<style>
body{margin:0;background:linear-gradient(#040715,#111b44);color:#eee;font-family:system-ui}
header{background:#1b2560;padding:16px;text-align:center;font-size:22px;font-weight:900}
.container{max-width:1200px;margin:auto;padding:14px}
.panel{background:#1f2b6a;border-radius:18px;padding:16px;margin-bottom:16px;box-shadow:0 0 14px #000}
button{background:#9ab8ff;border:none;border-radius:14px;padding:10px 18px;font-weight:800;color:#000}
.option{background:#121b52;border:1px solid #444;border-radius:14px;padding:14px;margin:8px 0;cursor:pointer}
.option:hover{background:#2a3790}
.hidden{display:none}
.npc{background:#0e153a;border-radius:12px;padding:10px;margin:8px 0}
.bar{height:6px;background:#555;border-radius:6px;overflow:hidden}
.fill{height:6px;background:#9ab8ff}
.map{display:grid;grid-template-columns:repeat(4,1fr);gap:10px}
.cell{background:#0f173e;border-radius:14px;padding:16px;text-align:center}
</style>
</head>
<body>

<header>ğŸŒŒ å·«æ°ä¿®ä»™ä¸–ç•Œ Â· æ²‰æµ¸å¼å‰§æƒ…æ¨¡æ‹Ÿ V7</header>

<div class="container">

<div class="panel" id="intro">
<h3>ğŸ“– ä¸–ç•ŒèƒŒæ™¯</h3>
<p>
åœ¨æµ©ç€šæ— å çš„ä¿®çœŸç•Œï¼Œçµæ°”æ½®æ±ä¸æ–­èµ·ä¼ã€‚å®—é—¨ä¸ä¸–å®¶åœ¨ç››è¡°è½®å›ä¸­æ›´æ›¿å…´äº¡ã€‚  
å‡¡äººå¦‚å°˜åŸƒèˆ¬ç”Ÿå­˜ï¼Œè€Œä¿®å£«æŒæ§å‘½è¿ã€‚  
å·«æ°å®¶æ—åŸæœ¬åªæ˜¯å‡¡ä¿—å°æ—ï¼Œå´å› ä»£ä»£æ—é•¿â€œå·«çœŸâ€æ‹¥æœ‰æƒŠäººæ°”è¿ï¼Œé€æ¸è¸å…¥ä¿®çœŸèˆå°ã€‚
</p>
<button onclick="showHero()">è¿›å…¥ä¸»è§’æ•…äº‹</button>
</div>

<div class="panel hidden" id="heroIntro">
<h3>ğŸ‘¤ ä¸»è§’èƒŒæ™¯</h3>
<p>
ä½ æ˜¯æ–°ä¸€ä»£æ—é•¿å·«çœŸï¼Œè‡ªå¹¼ç›®ç¹å®¶æ—åœ¨çµæ°”è¡°é€€æ—¶ä»£æŒ£æ‰æ±‚ç”Ÿã€‚  
å®—é—¨å‹è¿«ã€ä¸–å®¶å€¾è½§ã€é­”é“æš—æ¶Œï¼Œæ‰€æœ‰åŠ›é‡éƒ½åœ¨çª¥è§†å·«æ°çš„å´›èµ·ã€‚  
ä½ å°†å†³å®šå®¶æ—çš„å‘½è¿ã€‚
</p>
<button onclick="startGame('ç”·')">ç”·æ—é•¿</button>
<button onclick="startGame('å¥³')">å¥³æ—é•¿</button>
</div>

<div id="game" class="hidden">

<div class="panel">
ğŸ“† <span id="time"></span> ï½œ ğŸ§¬ <span id="root"></span> ï½œ ğŸ‘¤ <span id="gender"></span>
</div>

<div class="panel" id="story"></div>
<div class="panel" id="options"></div>

<div class="panel">
<h3>ğŸ—º åœ°åŒºåœ°å›¾</h3>
<div class="map">
<div class="cell">å·«æ°é¢†åœ°</div>
<div class="cell">å¤©å‰‘å®—</div>
<div class="cell">ä¸¹é¼é—¨</div>
<div class="cell">å¹½é­‚æ®¿</div>
<div class="cell">ä¸‡å¦–è°·</div>
<div class="cell">å‡¡äººç‹æœ</div>
<div class="cell">æ•£ä¿®é›†å¸‚</div>
<div class="cell">ä¸Šå¤é—è¿¹</div>
</div>
</div>

<div class="panel">
<h3>ğŸ‘¥ äººç‰©å…³ç³»</h3>
<div id="npcBox"></div>
</div>

</div>

</div>

<script>
let year=1,month=1,day=1;
let gender=null;
let root=null;

const roots=[
 {n:"å‡¡çµæ ¹",r:40},{n:"åœ°çµæ ¹",r:25},{n:"å¤©çµæ ¹",r:15},{n:"åœ£çµæ ¹",r:12},{n:"æ··æ²Œçµæ ¹",r:8}
];

const npcs={
 "å‰‘æ— å°˜":{favor:45,desc:"å¤©å‰‘å®—é¦–å¸­å¤©éª„ï¼Œæ­£é“å¸Œæœ›"},
 "æŸ³å¦‚çƒŸ":{favor:55,desc:"ä¸¹é¼é—¨åœ£å¥³ï¼Œç‚¼ä¸¹å¥‡æ‰"},
 "é­…å½±":{favor:25,desc:"å¹½é­‚æ®¿å¦–å¥³ï¼Œå±é™©è«æµ‹"},
 "è§é€¸é£":{favor:35,desc:"æ•£ä¿®ç›Ÿä¸»ï¼Œè‡ªç”±ä¸ç¾"},
 "æ…•å®¹é›ª":{favor:40,desc:"éšä¸–å®¶æ—ä¼ äºº"},
 "é¾™å‚²å¤©":{favor:30,desc:"å¦–æ—åœ£å­"},
 "ç²ç‘":{favor:50,desc:"ä¸Šå¤å™¨çµ"}
};

function rollRoot(){
 let r=Math.random()*100,s=0;
 for(let g of roots){s+=g.r;if(r<=s)return g.n;}
}

function updateTime(){
 document.getElementById("time").innerText=`ç¬¬${year}å¹´${month}æœˆ${day}æ—¥`;
}

function advance(){
 day++;if(day>30){day=1;month++;}
 if(month>12){month=1;year++;}
 updateTime();
 npcAuto();
}

function npcAuto(){
 for(let n in npcs){
  npcs[n].favor+=Math.floor(Math.random()*3-1);
 }
 renderNPC();
}

function renderNPC(){
 const box=document.getElementById("npcBox");
 box.innerHTML="";
 for(let n in npcs){
  const v=npcs[n];
  box.innerHTML+=`
  <div class="npc">
   â¤ï¸ <b>${n}</b> (${v.desc}) å¥½æ„Ÿ:${v.favor}
   <div class="bar"><div class="fill" style="width:${v.favor}%"></div></div>
  </div>`;
 }
}

function showStory(text){
 document.getElementById("story").innerText=text;
 const o=document.getElementById("options");
 o.innerHTML="";
 ["ä¿®ç‚¼","å†…æ”¿","å¤–äº¤","æ¢é™©","åŸ¹å…»åè¾ˆ","è§‚å¯Ÿå±€åŠ¿"].forEach(t=>{
  const d=document.createElement("div");
  d.className="option";
  d.innerText=t;
  d.onclick=()=>nextTurn();
  o.appendChild(d);
 });
}

function nextTurn(){
 advance();
 const pool=[
 "çµæ°”æ½®æ±ç»§ç»­è¡°é€€ï¼Œèµ„æºæ„ˆå‘ç´§å¼ ï¼Œå„æ–¹åŠ¿åŠ›è ¢è ¢æ¬²åŠ¨ã€‚",
 "å¤©å‰‘å®—å†…éƒ¨æƒåŠ›æ–—äº‰æµ®å‡ºæ°´é¢ï¼Œæˆ–å°†æ³¢åŠå·«æ°ã€‚",
 "å¹½é­‚æ®¿æš—ä¸­æ‰©å¼ ï¼Œä¿®çœŸç•Œé£é›¨æ¬²æ¥ã€‚",
 "å‡¡äººç‹æœå¸Œæœ›å·«æ°åº‡æŠ¤ï¼Œå¸¦æ¥åºå¤§èµ„æºã€‚",
 "ä¸Šå¤é—è¿¹å†åº¦å¼€å¯ï¼Œå¼•å‘å„æ–¹äº‰å¤ºã€‚"
 ];
 showStory(pool[Math.floor(Math.random()*pool.length)]);
}

function showHero(){
 document.getElementById("intro").classList.add("hidden");
 document.getElementById("heroIntro").classList.remove("hidden");
}

function startGame(g){
 gender=g;
 root=rollRoot();
 document.getElementById("gender").innerText=g+"æ—é•¿";
 document.getElementById("root").innerText="çµæ ¹ï¼š"+root;
 document.getElementById("heroIntro").classList.add("hidden");
 document.getElementById("game").classList.remove("hidden");
 updateTime();
 renderNPC();
 showStory("æµ‹çµå®Œæˆï¼Œä½ æ­£å¼è¸å…¥ä¿®çœŸç•Œçš„æ£‹å±€ä¹‹ä¸­â€¦â€¦");
}
</script>

</body>
</html>
