<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>æ€¨ç§å¥³é…æ€æ¡Œå½• Â· Day1-20 å®Œæ•´ç‰ˆ</title>
<style>
:root{
  --bg:#0f1220;
  --card:#1b1f3a;
  --card2:#14182e;
  --text:#eaeaff;
  --muted:#b7b9ff;
  --border:#3b3f7a;
  --accent:#ff6aa2;
  --good:#7cffb2;
  --warn:#ffd36b;
  --bad:#ff5b5b;
  --glow:#ff6aa288;
  --shadow:0 0 12px #0007;
  --r:14px;
}
*{box-sizing:border-box}
body{
  margin:0;
  color:var(--text);
  font-family:"PingFang SC","Microsoft YaHei",system-ui,-apple-system,Segoe UI,Roboto,Arial;
  background: radial-gradient(1200px 800px at 20% 0%, #1a1f44 0%, var(--bg) 55%, #0b0d18 100%);
}
.container{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:12px;
  padding:12px;
}
.card{
  background:linear-gradient(180deg,var(--card) 0%,var(--card2) 100%);
  border:1px solid var(--border);
  border-radius:var(--r);
  padding:14px;
  box-shadow:var(--shadow);
  position:relative;
  overflow:hidden;
}
h3{margin:0 0 10px; color:var(--accent); font-size:16px; letter-spacing:.4px;}
.small{font-size:12px;color:var(--muted);line-height:1.55}
.hr{height:1px;background:linear-gradient(90deg,transparent,var(--border),transparent);margin:10px 0;}
@media(max-width:820px){.container{grid-template-columns:1fr;}}

/* story */
#story{height:290px;overflow:auto;line-height:1.78;font-size:14px;padding-right:6px;white-space:pre-wrap;}
#story::-webkit-scrollbar{width:8px}
#story::-webkit-scrollbar-thumb{background:var(--border);border-radius:10px}

/* options */
.option{
  background:#242a62;
  border:1px solid #2f3578;
  padding:10px;
  margin:8px 0;
  border-radius:10px;
  cursor:pointer;
  transition:.15s;
  user-select:none;
}
.option:hover{transform:translateY(-1px); border-color:var(--accent); box-shadow:0 0 10px var(--glow);}
.option.highlight{border-color:var(--accent); box-shadow:0 0 16px var(--glow);}
.tag{
  display:inline-block;
  font-size:12px;
  padding:2px 8px;
  border-radius:999px;
  margin-right:8px;
  border:1px solid #ffffff22;
  opacity:.95;
}
.tag-main{color:var(--accent);background:#ff6aa214;border-color:#ff6aa244;}
.tag-safe{color:var(--good);background:#7cffb214;border-color:#7cffb255;}
.tag-risk{color:var(--bad);background:#ff5b5b14;border-color:#ff5b5b66;}
.tag-warn{color:var(--warn);background:#ffd36b14;border-color:#ffd36b66;}

/* stats */
.stat{display:flex;align-items:center;gap:10px;margin:6px 0;font-size:13px;}
.stat b{width:90px;color:#fff;font-weight:600}
.bar{flex:1;height:8px;background:#00000033;border:1px solid #ffffff12;border-radius:999px;overflow:hidden}
.fill{height:100%;background:linear-gradient(90deg,#7cffb2,#ffd36b,#ff6aa2);width:50%}
.val{width:44px;text-align:right}

/* system */
.sysRow{display:flex;justify-content:space-between;align-items:center;gap:10px;margin:6px 0;font-size:13px;}
.badge{font-size:12px;padding:2px 8px;border-radius:999px;border:1px solid #ffffff22;}
.badge-ok{color:var(--good);border-color:#7cffb266;background:#7cffb214;}
.badge-warn{color:var(--warn);border-color:#ffd36b66;background:#ffd36b12;}
.badge-bad{color:var(--bad);border-color:#ff5b5b66;background:#ff5b5b14;}

.btn{
  cursor:pointer;
  border-radius:10px;
  padding:8px 10px;
  border:1px solid #ffffff22;
  background:#20245a;
  color:var(--text);
  transition:.15s;
  font-size:13px;
}
.btn:hover{transform:translateY(-1px);border-color:var(--accent);box-shadow:0 0 10px var(--glow);}
.btn:disabled{opacity:.55;cursor:not-allowed;transform:none;box-shadow:none}

/* floating tip */
.float{
  position:fixed; right:14px; top:14px; z-index:9999;
  padding:8px 10px; border-radius:10px;
  border:1px solid #ffffff22; background:#12152aee; box-shadow:var(--shadow);
  animation: floatUp 1.4s ease-out forwards; font-size:13px;
  max-width:88vw;
}
.float.good{color:var(--good);border-color:#7cffb255}
.float.bad{color:var(--bad);border-color:#ff5b5b66}
.float.warn{color:var(--warn);border-color:#ffd36b66}
@keyframes floatUp{from{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-40px)}}

/* punishment animation */
.flash{position:fixed;inset:0;background:radial-gradient(900px 400px at 50% 20%, #ff5b5b33, transparent 70%);opacity:0;pointer-events:none;z-index:9998;}
.flash.on{animation:flash .55s ease-in-out;}
@keyframes flash{0%{opacity:0}35%{opacity:1}100%{opacity:0}}
.shake{animation:shake .42s linear}
@keyframes shake{0%{transform:translateX(0)}20%{transform:translateX(-6px)}40%{transform:translateX(6px)}60%{transform:translateX(-4px)}80%{transform:translateX(4px)}100%{transform:translateX(0)}}

/* modal */
.mask{position:fixed;inset:0;background:#00000088;display:none;align-items:center;justify-content:center;z-index:10000;}
.mask.show{display:flex}
.modal{
  width:min(820px, 92vw);
  max-height:84vh;
  overflow:auto;
  background:linear-gradient(180deg,#1b1f3a 0%, #14182e 100%);
  border:1px solid var(--border);
  border-radius:var(--r);
  box-shadow:var(--shadow);
  padding:14px;
}
.modalTop{display:flex;justify-content:space-between;align-items:center;gap:10px;}
.shopGrid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-top:10px;}
@media(max-width:680px){.shopGrid{grid-template-columns:1fr}}
.item{border:1px solid #ffffff1a;background:#10132a66;border-radius:12px;padding:10px;}
.item h4{margin:0 0 6px;color:#fff;font-size:14px;}
.meta{display:flex;gap:8px;align-items:center;margin:6px 0;font-size:12px;color:var(--muted);}
.price{color:var(--accent);border:1px solid #ff6aa244;background:#ff6aa214;border-radius:999px;padding:2px 8px;}
.desc{font-size:12px;line-height:1.55;color:#d7d9ff;}
.row{display:flex;justify-content:space-between;align-items:center;gap:10px;margin-top:10px;}
.grid2{display:grid;grid-template-columns:1fr 1fr;gap:10px;}
@media(max-width:820px){.grid2{grid-template-columns:1fr}}

/* portrait panel */
.portraits{display:flex;gap:10px;flex-wrap:wrap}
.portrait{
  border:1px solid #ffffff22;
  background:#0d1023aa;
  border-radius:12px;
  padding:10px;
  display:flex;
  gap:10px;
  align-items:center;
  min-width:220px;
}
.face{
  width:44px;height:44px;border-radius:12px;
  display:flex;align-items:center;justify-content:center;
  background:linear-gradient(180deg,#2a2f68,#15183a);
  border:1px solid #ffffff22;
  font-size:22px;
}
.name{font-weight:800}
.mood{font-size:12px;color:var(--muted)}
.portrait.active{border-color:var(--accent);box-shadow:0 0 10px var(--glow);}
</style>
</head>

<body>
<div class="flash" id="flash"></div>

<div class="container">

  <div class="card" id="cardStory">
    <h3>ğŸ“œ å½“å‰å‰§æƒ…</h3>
    <div class="small" id="subtitle"></div>
    <div class="hr"></div>
    <div class="portraits" id="portraits"></div>
    <div class="hr"></div>
    <div id="story"></div>
  </div>

  <div class="card" id="cardAction">
    <h3>ğŸ¯ è¡ŒåŠ¨é¢æ¿</h3>
    <div class="small">æ¯å›åˆåªèƒ½é€‰ 1 é¡¹ã€‚é«˜äº®=æ€æ¡Œ/é«˜é£é™©ã€‚ä½ è¶Šåç¦»ï¼Œç³»ç»Ÿè¶Šç‹ ï¼›ä½ è¶Šç‹ ï¼Œæ€æ¡Œå€¼è¶Šå¤šã€‚</div>
    <div class="hr"></div>
    <div id="options"></div>
    <div class="hr"></div>
    <div style="display:flex;gap:10px;flex-wrap:wrap">
      <button class="btn" id="btnCustom">âœï¸ è‡ªå®šä¹‰è¡ŒåŠ¨</button>
      <button class="btn" id="btnEnd">â© ç»“æŸæœ¬å›åˆ</button>
    </div>
  </div>

  <div class="card" id="cardStats">
    <h3>ğŸ“Š è§’è‰²çŠ¶æ€</h3>
    <div class="small">æç¤ºï¼šç³»ç»Ÿè­¦å‘Šå€¼â‰¥70ä¼šè§¦å‘æ›´å¼ºæƒ©ç½šï¼›å¥åº·â‰¤15å¯èƒ½â€œç—…å€’â€ï¼Œå¼ºåˆ¶ä¼‘å…»ã€‚</div>
    <div class="hr"></div>
    <div id="stats"></div>
  </div>

  <div class="card" id="cardSystem">
    <h3>âš™ ç³»ç»Ÿç›‘æ§</h3>
    <div id="system"></div>
    <div class="hr"></div>
    <div style="display:flex;gap:10px;flex-wrap:wrap">
      <button class="btn" id="btnShop">ğŸ›’ ç³»ç»Ÿå•†åŸ</button>
      <button class="btn" id="btnAch">ğŸ† æˆå°±</button>
      <button class="btn" id="btnSave">ğŸ’¾ å­˜æ¡£</button>
      <button class="btn" id="btnLoad">ğŸ“¥ è¯»æ¡£</button>
      <button class="btn" id="btnReset">ğŸ§¨ æ¸…æ¡£é‡å¼€</button>
    </div>
  </div>

</div>

<!-- Shop Modal -->
<div class="mask" id="shopMask">
  <div class="modal">
    <div class="modalTop">
      <div>
        <div style="font-weight:800;color:#fff">ğŸ›’ ç³»ç»Ÿå•†åŸ</div>
        <div class="small">è´§å¸=æ€æ¡Œå€¼ã€‚ä¹°æŠ€èƒ½ä¼šè®©ä½ æ›´å®¹æ˜“â€œéª—è¿‡ç³»ç»Ÿâ€ã€‚</div>
      </div>
      <button class="btn" id="btnCloseShop">å…³é—­</button>
    </div>
    <div class="hr"></div>
    <div class="small" id="shopMoney"></div>
    <div class="shopGrid" id="shopGrid"></div>
  </div>
</div>

<!-- Achievements Modal -->
<div class="mask" id="achMask">
  <div class="modal">
    <div class="modalTop">
      <div>
        <div style="font-weight:800;color:#fff">ğŸ† æˆå°±</div>
        <div class="small">è§£é”ä¼šè‡ªåŠ¨å­˜æ¡£ã€‚ä½ ä¼šè¶Šæ¥è¶Šåƒâ€œå‰§æœ¬å¤–çš„äººâ€ã€‚</div>
      </div>
      <button class="btn" id="btnCloseAch">å…³é—­</button>
    </div>
    <div class="hr"></div>
    <div id="achList" class="small"></div>
  </div>
</div>

<!-- Ending Modal -->
<div class="mask" id="endMask">
  <div class="modal">
    <div class="modalTop">
      <div>
        <div style="font-weight:900;color:#fff">ğŸ¬ ç»ˆå±€ç»“ç®—</div>
        <div class="small" id="endSub"></div>
      </div>
      <button class="btn" id="btnCloseEnd">å…³é—­</button>
    </div>
    <div class="hr"></div>
    <div id="endBody" style="white-space:pre-wrap;line-height:1.8"></div>
  </div>
</div>

<script>
/* =========================
   0) åŸºç¡€å·¥å…·
========================= */
const $ = id => document.getElementById(id);
const clamp = (n,min,max)=>Math.max(min,Math.min(max,n));

function tip(text, kind="good"){
  const d=document.createElement("div");
  d.className=`float ${kind}`;
  d.innerText=text;
  document.body.appendChild(d);
  setTimeout(()=>d.remove(),1400);
}

function typeText(text){
  const storyBox = $("story");
  storyBox.innerHTML="";
  let i=0;
  const timer=setInterval(()=>{
    storyBox.innerHTML += (text[i] ?? "");
    storyBox.scrollTop = storyBox.scrollHeight;
    i++;
    if(i>=text.length) clearInterval(timer);
  }, 8);
}

/* =========================
   1) å•†åŸï¼ˆæ²¿ç”¨ä½ ä¹‹å‰ï¼‰
========================= */
const Shop = [
  {id:"shield", name:"å±è”½ç¬¦", price:10, desc:"ä¸‹ä¸€æ¬¡å…ç³»ç»Ÿæƒ©ç½šï¼ˆä¸€æ¬¡æ€§ï¼‰ã€‚", apply:s=>s.buffs.noPunishOnce=true},
  {id:"actor", name:"æ¼”æŠ€å¤§å¸ˆ", price:40, desc:"è¢«åŠ¨ï¼šé™ä½æƒ©ç½šè§¦å‘æ¦‚ç‡ï¼ˆæ›´å®¹æ˜“éª—è¿‡ç³»ç»Ÿï¼‰ã€‚", apply:s=>s.buffs.actor=true},
  {id:"iron", name:"é“è¡€å¿ƒé˜²", price:30, desc:"è¢«åŠ¨ï¼šç³»ç»Ÿæƒ©ç½šå¯¹å¿ƒæ™º/å¥åº·çš„ä¼¤å®³-1ã€‚", apply:s=>s.buffs.iron=true},
  {id:"intel", name:"æƒ…æŠ¥çº¿äºº", price:25, desc:"ä¸€æ¬¡æ€§ï¼šä¸‹ä¸€å›åˆè°‹ç•¥+3ï¼ˆè‡ªåŠ¨è§¦å‘ï¼‰ã€‚", apply:s=>{s.buffs.nextIntelBoost=true}},
  {id:"lux", name:"ç²ç‘äººè„‰", price:35, desc:"è¢«åŠ¨ï¼šç¤¾äº¤é€‰é¡¹é¢å¤–+2å£°æœ›ã€‚", apply:s=>s.buffs.lux=true},
];

/* =========================
   2) æˆå°±ç³»ç»Ÿ
========================= */
const Achievements = [
  {id:"a_tableflip", name:"ç¬¬ä¸€æ¬¡æ€æ¡Œ", desc:"é€‰æ‹©ä¸€æ¬¡ã€Œæ€æ¡Œã€è¡ŒåŠ¨ã€‚", check:s=>s.player["æ€æ¡Œå€¼"]>=6},
  {id:"a_punish", name:"ç³»ç»Ÿç¬¬ä¸€æ¬¡æƒ©ç½š", desc:"è§¦å‘ä¸€æ¬¡ç³»ç»Ÿæƒ©ç½šã€‚", check:s=>s.flags.punishedOnce===true},
  {id:"a_romance", name:"å¿ƒåŠ¨è¿›è¡Œæ—¶", desc:"ç”œå® å€¾å‘â‰¥50 æˆ– å¤ªå­å¥½æ„Ÿâ‰¥60ã€‚", check:s=>s.routes.romance>=50 || s.player["å¤ªå­å¥½æ„Ÿ"]>=60},
  {id:"a_power", name:"æƒè°‹å…¥éª¨", desc:"æƒè°‹å€¾å‘â‰¥50 æˆ– è°‹ç•¥â‰¥85ã€‚", check:s=>s.routes.power>=50 || s.player["è°‹ç•¥"]>=85},
  {id:"a_dark", name:"é»‘åŒ–é˜ˆå€¼", desc:"é»‘åŒ–å€¾å‘â‰¥50 æˆ– åç¦»åº¦â‰¥70ã€‚", check:s=>s.routes.dark>=50 || s.player["åç¦»åº¦"]>=70},
  {id:"a_expose", name:"æŠ“åˆ°è‹æ¸…è²çš„æŠŠæŸ„", desc:"æ‹¿åˆ°å…³é”®è¯æ®ã€‚", check:s=>s.flags.hasEvidence===true},
  {id:"a_protect", name:"ä¸œå®«æŠ¤çŸ­", desc:"è§¦å‘ä¸€æ¬¡å¤ªå­å…¬å¼€æŠ¤ä½ ã€‚", check:s=>s.flags.princeProtected===true},
  {id:"a_shop", name:"ç¬¬ä¸€ç¬”äº¤æ˜“", desc:"åœ¨å•†åŸè´­ä¹°ä¸€æ¬¡ã€‚", check:s=>s.flags.boughtOnce===true},
  {id:"a_day10", name:"åæ—¥ä¸æ­»", desc:"æ¨è¿›åˆ°ç¬¬10å¤©ã€‚", check:s=>s.day>=10},
  {id:"a_end", name:"èµ°åˆ°ç»ˆå±€", desc:"å®Œæˆä»»æ„ç»“å±€ã€‚", check:s=>s.flags.ended===true},
];

/* =========================
   3) è§’è‰²&ç«‹ç»˜ï¼ˆå…ˆç”¨å†…ç½®å¤´åƒå¡ï¼‰
========================= */
const Characters = {
  you: {icon:"ğŸª­", name:"æŸ³æ‰¶é£", mood:"å†·é™", key:"you"},
  prince: {icon:"ğŸ‘‘", name:"æ…•å®¹ç©", mood:"å†·æ·¡", key:"prince"},
  su: {icon:"ğŸŒ¸", name:"è‹æ¸…è²", mood:"æ— è¾œ", key:"su"},
  sys: {icon:"ğŸ§©", name:"ç³»ç»Ÿ", mood:"ç›‘æ§ä¸­", key:"sys"},
};

function setMood(key, mood){
  if(Characters[key]) Characters[key].mood=mood;
}
function setActive(key){
  State.ui.activeChar = key;
  renderPortraits();
}

function renderPortraits(){
  const box = $("portraits");
  box.innerHTML="";
  const order = ["you","prince","su","sys"];
  order.forEach(k=>{
    const c = Characters[k];
    const el = document.createElement("div");
    el.className = "portrait" + (State.ui.activeChar===k ? " active":"");
    el.innerHTML = `
      <div class="face">${c.icon}</div>
      <div>
        <div class="name">${c.name}</div>
        <div class="mood">çŠ¶æ€ï¼š${c.mood}</div>
      </div>
    `;
    box.appendChild(el);
  });
}

/* =========================
   4) Day1â€“Day20 å‰§æƒ…æ–‡æœ¬ï¼ˆå«åˆ†æ”¯å€¾å‘ï¼‰
   - æ¯å¤©4é€‰é¡¹ï¼šç”œå® /æƒè°‹/é»‘åŒ–/å…»æˆ(ç¨³)
========================= */
function D(day, title, intro, opts){
  return {
    title: `ç¬¬${day}æ—¥ Â· ${title}`,
    intro,
    options: ()=>opts
  };
}

/* è¯´æ˜ï¼š
   effect: å±æ€§å˜åŒ–ï¼ˆ0~100 clampï¼‰
   route: {romance:+x, power:+x, dark:+x}
   flags: ä¼šå†™å…¥ State.flags
   speaker: åˆ‡æ¢ç«‹ç»˜
   highlight: é«˜é£é™©é«˜æ”¶ç›Š
*/
const Plot = {
  1: D(1, "å°†å†›åºœ", 
`ä½ çŒ›åœ°çå¼€çœ¼ã€‚

ç»£å¸ä½å‚ï¼Œæª€é¦™å¹½å¹½ã€‚ä½ ç©¿è¿›è™æ–‡ï¼Œæˆäº†æœ€ç»ˆæƒ¨æ­»çš„å¥³é…ï¼šæŸ³æ‰¶é£ã€‚

ç³»ç»ŸéŸ³å†·å†·è½ä¸‹ï¼š
ã€ä¸»çº¿ï¼šåˆåå‰å¾€ä¸œå®«ï¼Œä¸ºå¤ªå­é€å‚æ±¤ã€‚ã€‘

åŸè‘—é‡Œï¼Œä½ ä¼šè¢«è‹æ¸…è²â€œæ— å¿ƒâ€æ’ç¿»æ±¤ç›…ï¼Œæ²¦ä¸ºç¬‘æŸ„ã€‚

ä½ æŠ¬æ‰‹ï¼ŒæŒ‡å°–å‘ç™½ã€‚

â€œè¿™ä¸€ä¸–â€”â€”æˆ‘ä¸å½“æ€¨ç§ã€‚â€`,
[
  {id:"1A", tag:["ä¸»çº¿","ä½é£é™©"], speaker:"you",
   text:"ä¹–ä¹–é€æ±¤ï¼Œå…ˆç¨³ä½ç³»ç»Ÿã€‚",
   effect:{"å¤ªå­å¥½æ„Ÿ":+2,"åç¦»åº¦":-1,"è´µå¥³å£°æœ›":-2},
   route:{romance:+2,power:+1,dark:+0},
   story:`ä½ è¿˜æ˜¯å»äº†ä¸œå®«ï¼ŒæŠŠå‚æ±¤é€’ä¸Šå»ï¼Œç¬‘å¾—å…‹åˆ¶ã€‚

å¤ªå­æ…•å®¹ç©æŠ¬çœ¸ä¸€çœ¼ï¼šâ€œæ”¾ä¸‹ã€‚â€

ä½ é€€åˆ°å»Šä¸‹ï¼Œå¿ƒé‡Œå´æŠŠâ€œå¿â€å†™æˆäº†â€œåˆ€â€ã€‚`
  },
  {id:"1B", tag:["æ€æ¡Œ","é«˜é£é™©"], speaker:"you", highlight:true,
   text:"è®¾å®´å½“ä¼—å€’æ±¤æ€æ¡Œï¼Œå…ˆéœ‡ä¸€åŸã€‚",
   effect:{"æ€æ¡Œå€¼":+6,"åç¦»åº¦":+5,"è´µå¥³å£°æœ›":+3,"ç³»ç»Ÿè­¦å‘Šå€¼":+6,"å¤ªå­å¥½æ„Ÿ":-2},
   route:{romance:-1,power:+2,dark:+6},
   story:`ä½ åœ¨é£åè‹‘è®¾å®´ï¼Œè´µå¥³äº‘é›†ã€‚

ä½ ç«¯èµ·å‚æ±¤â€”â€”ä¼—äººä»¥ä¸ºä½ è¦è¡¨å¿ ã€‚

ä½ å´å½“ä¼—æŠŠæ±¤å€’è¿›èŠ±æ± ã€‚

ã€è­¦æŠ¥ï¼ä¸¥é‡åç¦»ä¸»çº¿ï¼ã€‘

ä½ ç¬‘å¾—æ— è¾œåˆç‹ ï¼šâ€œæ±¤å‡‰äº†ï¼Œé€äººä¸åˆç¤¼æ•°ã€‚â€`
  },
  {id:"1C", tag:["è°‹ç•¥","ä¸­é£é™©"], speaker:"you",
   text:"æš—æŸ¥è‹æ¸…è²ï¼Œå…ˆæ‹¿è¯æ®ã€‚",
   effect:{"è°‹ç•¥":+3,"åç¦»åº¦":+2,"è‹æ¸…è²æ€€ç–‘":+3},
   route:{romance:+0,power:+5,dark:+1},
   flags:{hasEvidenceHint:true},
   story:`ä½ ä¸æ€¥ç€æ€æ¡Œï¼Œä½ æ›´æƒ³çŸ¥é“ï¼šè‹æ¸…è²åˆ°åº•æ˜¯ç™½è²ï¼Œè¿˜æ˜¯å¸¦æ¯’ã€‚

æš—å«å›æŠ¥ï¼šä¸ç›¸åºœå¬·å¬·ä¸ä¸œå®«å†…ä¾é¢‘ç¹æ¥è§¦ï¼Œåˆ»æ„é¿å¼€æ­£é—¨ã€‚

ä½ æŒ‡å°–è½»æ•²æ¡Œé¢ï¼šå¥½ï¼Œé—»åˆ°â€œå‰§æœ¬å¤–â€çš„å‘³é“äº†ã€‚`
  },
  {id:"1D", tag:["å…»æˆ","ä½é£é™©"], speaker:"you",
   text:"é—­é—¨ä¼‘å…»ï¼Œå…ˆæŠŠèº«ä½“å…»ç¡¬ã€‚",
   effect:{"å¿ƒæ™º":+4,"å¥åº·":+3},
   route:{romance:+0,power:+1,dark:+0},
   story:`ä½ é—­é—¨è°ƒå…»ï¼Œå‘¼å¸å›åˆ°ç¨³å®šçš„èŠ‚å¥ã€‚

ç³»ç»Ÿä»å‚¬ä¿ƒï¼Œä½ å´åƒæŠŠé‚£æœºæ¢°éŸ³æŒ‰è¿›æ°´é‡Œã€‚

çˆ½æ€æ¡Œå¾ˆç—›å¿«â€”â€”ä½†ä½ å¾—æœ‰èƒ½æ‰›æƒ©ç½šçš„èº«ä½“ï¼Œå’Œæ›´ç¡¬çš„å¿ƒã€‚`
  }
]),

  2: D(2, "åŸä¸­æš—æµ",
`ç¬¬äºŒæ—¥æ¸…æ™¨ï¼Œæ°¸å®åŸçš„é£å¸¦ç€å¯’ã€‚

ã€æç¤ºï¼šåç¦»åº¦è¶Šé«˜ï¼Œç³»ç»Ÿè¶Šå€¾å‘æŠ•æ”¾æƒ©ç½šäº‹ä»¶ä»¥ä¿®æ­£ã€‚ã€‘

ä½ æœ›å‘çª—å¤–è½¦é©¬â€”â€”è¿™åŸé‡Œæ¯ä¸€æ¡å··å­éƒ½è—ç€è€³æœµã€‚`,
[
  {id:"2A", tag:["ç”œå® ","ä¸­é£é™©"], speaker:"prince",
   text:"å€Ÿå£â€œè¿˜æ±¤ç›…â€ï¼Œä¸å¤ªå­ç§ä¸‹å¤šè¯´ä¸€å¥ã€‚",
   effect:{"å¤ªå­å¥½æ„Ÿ":+5,"åç¦»åº¦":+1,"ç³»ç»Ÿè­¦å‘Šå€¼":+2},
   route:{romance:+8,power:+1,dark:+0},
   story:`ä½ ä»¥â€œè¿˜æ±¤ç›…â€ä¸ºç”±å…¥ä¸œå®«åæ®¿ã€‚

å¤ªå­çœ‹ä½ ï¼šâ€œä½ åˆ°åº•æ€•ä»€ä¹ˆï¼Ÿâ€

ä½ è½»å£°ï¼šâ€œæ€•æˆ‘åˆä¸€æ¬¡æŠŠå‘½äº¤ç»™åˆ«äººã€‚â€

ä»–æ²‰é»˜è‰¯ä¹…ï¼Œåªé“ï¼šâ€œä»¥ååˆ«ä¸€ä¸ªäººæ‰›ã€‚â€`
  },
  {id:"2B", tag:["æƒè°‹","ä¸­é£é™©"], speaker:"you",
   text:"æ¢è´¦å†Œå–è¯ï¼šæ‘¸åˆ°ä¸ç›¸åºœåé™¢çš„ç ´å£ã€‚",
   effect:{"è°‹ç•¥":+2,"è‹æ¸…è²æ€€ç–‘":+4,"åç¦»åº¦":+1},
   route:{romance:+0,power:+8,dark:+1},
   flags:{evidenceStep:+1},
   story:`ä½ æ´¾äººä»¥â€œé€ç»¸ç¼â€åä¹‰å…¥ä¸ç›¸åºœåé™¢ã€‚

æš—å«æ¢ä¸‹æ´—è¡£æˆ¿å‡ºå…¥å†Œï¼Œå¸¦å›ä¸€é¡µæ’•ç¢ç¥¨æ®ï¼Œéšçº¦æœ‰â€œä¸œå®«â€å°è®°ã€‚

è¯æ®å¾ˆè–„ï¼Œä½†è–„åˆ€ä¹Ÿèƒ½å‰²å–‰ã€‚`
  },
  {id:"2C", tag:["æ€æ¡Œ","é«˜é£é™©"], speaker:"you", highlight:true,
   text:"å½“ä¼—é€€å·®äº‹ï¼šç¤¼å†Œå¤ªåšï¼Œæˆ‘æ‰‹é…¸ã€‚",
   effect:{"æ€æ¡Œå€¼":+7,"åç¦»åº¦":+4,"ç³»ç»Ÿè­¦å‘Šå€¼":+6,"è´µå¥³å£°æœ›":-2},
   route:{romance:+1,power:+4,dark:+6},
   story:`ç¤¼éƒ¨é€’æ¥å·®äº‹ï¼Œè¦ä½ æ›¿å¤ªå­æŒ‘å¤ªå­å¦ƒç¤¼å†Œã€‚

ä½ å½“ä¼—æ¨å›å»ï¼Œç¬‘è¯´ï¼šâ€œç¤¼å†Œå¤ªåšï¼Œæˆ‘æ€•æ‰‹é…¸ã€‚â€

ä¼—äººæƒ³ç¬‘åˆä¸æ•¢â€”â€”ä½ æŠŠä»–ä»¬çš„è„¸é¢å½“çº¸æ’•ã€‚`
  },
  {id:"2D", tag:["å…»æˆ","ä½é£é™©"], speaker:"you",
   text:"æŠ„å…µä¹¦ä¿®å¿ƒï¼šå…ˆæŠŠâ€œèµ¢â€å†™è¿›éª¨å¤´é‡Œã€‚",
   effect:{"å¿ƒæ™º":+3,"å¥åº·":+2,"è°‹ç•¥":+1},
   route:{romance:+0,power:+3,dark:+0},
   story:`ä½ æŠŠè‡ªå·±é”è¿›ä¹¦æˆ¿ï¼ŒæŠ„äº†ä¸€é¡µå…µä¹¦ã€‚

ä½ ä¸åšâ€œæ·±æƒ…å¥³é…â€ï¼Œä½ åšâ€œä¼šèµ¢çš„äººâ€ã€‚`
  }
]),

  3: D(3, "ä¸œå®«å›å£°",
`ç¬¬ä¸‰æ—¥ï¼Œä¸œå®«ä¼ æ¥å£è°•ï¼šå¤ªå­è¦è§ä½ ã€‚

ã€å»ºè®®ï¼šä¿æŒäººè®¾ä¸€è‡´ï¼Œé¿å…é«˜å¼ºåº¦åç¦»ã€‚ã€‘

ä½ æŠŠå”‡è§’å‹æˆä¸€æ¡çº¿ï¼šâ€œå»ºè®®ï¼Ÿæˆ‘æœ€è®¨åŒè¢«å»ºè®®ã€‚â€`,
[
  {id:"3A", tag:["ç”œå® ","ä¸­é£é™©"], speaker:"prince",
   text:"èµ´çº¦ä½†ä¸å‘ï¼šæ¸©æŸ”å¸¦åˆºï¼Œå¤ªå­ç¬¬ä¸€æ¬¡æ­£çœ¼çœ‹ä½ ã€‚",
   effect:{"å¤ªå­å¥½æ„Ÿ":+6,"è´µå¥³å£°æœ›":+2},
   route:{romance:+10,power:+2,dark:+0},
   story:`ä½ è¿›ä¸œå®«æ—¶ï¼Œé£ä»å»Šä¸‹ç©¿è¿‡ã€‚

å¤ªå­ç›¯ç€ä½ ï¼šâ€œæœ€è¿‘åŸé‡Œè®®è®ºä½ ã€‚â€

ä½ æŠ¬çœ¼ï¼Œè¯­æ°”è½¯å´ä¸ä½ï¼šâ€œè®®è®ºåªä¼šè¿½ç€è¾“çš„äººã€‚æˆ‘ä¸è¾“ï¼Œè‡ªç„¶å°±æ•£ã€‚â€

ä»–å¿½ç„¶ç¬‘äº†ä¸€å£°ï¼Œå¾ˆè½»ï¼Œå´åƒç¬¬ä¸€æ¬¡æŠŠä½ å½“â€œäººâ€ã€‚`
  },
  {id:"3B", tag:["æƒè°‹","ä¸­é£é™©"], speaker:"you",
   text:"é€’è¯æ®è°ˆæ¡ä»¶ï¼šä½ ä¸æ±‚æƒ…ï¼Œä½ è°ˆäº¤æ¢ã€‚",
   effect:{"è°‹ç•¥":+3,"å¤ªå­å¥½æ„Ÿ":+2,"åç¦»åº¦":+1},
   route:{romance:+2,power:+10,dark:+1},
   flags:{evidenceStep:+1},
   story:`ä½ é€’ä¸Šä¸€é¡µæ®‹å†Œï¼šâ€œæ®¿ä¸‹è‹¥ä¸ä¿¡æˆ‘ï¼Œä¹Ÿè¯¥ä¿¡è´¦æœ¬ã€‚â€

å¤ªå­ç›®å…‰å˜æ·±ï¼šâ€œä½ æƒ³è¦ä»€ä¹ˆï¼Ÿâ€

ä½ ç­”ï¼šâ€œæˆ‘è¦å¥¹çš„â€˜æ— å¿ƒä¹‹å¤±â€™â€”â€”å˜æˆé“è¯ã€‚â€`
  },
  {id:"3C", tag:["æ€æ¡Œ","é«˜é£é™©"], speaker:"you", highlight:true,
   text:"å½“é¢æ€æ¡Œï¼šç¾è¾±çš„ä¸æ˜¯å¤ªå­ï¼Œæ˜¯è§„çŸ©ã€‚",
   effect:{"æ€æ¡Œå€¼":+8,"åç¦»åº¦":+5,"ç³»ç»Ÿè­¦å‘Šå€¼":+10,"å¤ªå­å¥½æ„Ÿ":+1},
   route:{romance:+1,power:+6,dark:+10},
   story:`ä½ æŠŠå¤ªå­å¦ƒåå†Œæ¨å›å»ã€‚

å¤ªå­çœ¸è‰²ä¸€æ²‰ï¼šâ€œä½ åœ¨ç¾è¾±å­¤ï¼Ÿâ€

ä½ è½»å£°ï¼šâ€œæ®¿ä¸‹è¯¯ä¼šäº†ã€‚æˆ‘åªæ˜¯åœ¨ç¾è¾±â€˜æŠŠå¥³äººå½“æ£‹å­â€™çš„è§„çŸ©ã€‚â€

ç³»ç»Ÿå°–é¸£ï¼Œä½ å´ä¸€æ­¥ä¸é€€ã€‚

å¤ªå­åªé“ï¼šâ€œä½ èƒ†å­å¾ˆå¤§ã€‚â€

ä½ ç¬‘ï¼šâ€œæ®¿ä¸‹ç»ˆäºå‘ç°äº†ã€‚â€`
  },
  {id:"3D", tag:["å…»æˆ","ä½é£é™©"], speaker:"you",
   text:"ç§°ç—…ä¸å»ï¼šä»¥ç—…ä¸ºç›¾ï¼Œç»™è‡ªå·±å–˜æ¯ã€‚",
   effect:{"å¥åº·":+3,"å¿ƒæ™º":+3,"åç¦»åº¦":-1},
   route:{romance:+0,power:+2,dark:+0},
   story:`ä½ è®©äººå›è¯ï¼šâ€œæˆ‘ç—…æœªæ„ˆï¼Œæå†²æ’æ®¿ä¸‹ã€‚â€

ç³»ç»Ÿä¸æ»¡ï¼Œä½†ä½ ç”¨ç—…åšç›¾ã€‚

æœ‰äº›æˆ˜æ–—ï¼Œä¸å¿…åœ¨ä»Šå¤©ã€‚`
  }
]),
};

/* â€”â€” Day4â€“Day20 ç”Ÿæˆï¼ˆæ–‡æœ¬å·²å†™å¥½ï¼Œé¿å…ä½ åªåˆ°Day3ï¼‰ */
(function buildDay4to20(){
  const days = [
    // day, title, intro, four options: romance/power/dark/rest
    [4,"ä¸ç›¸åºœå¤œå½±",
`å¤œé‡Œï¼Œä½ æ”¶åˆ°åŒ¿åçº¸æ¡ï¼šä»Šæ™šå­æ—¶ï¼Œè‹æ¸…è²ä¼šè§â€œå®«ä¸­äººâ€ã€‚

ç³»ç»Ÿæç¤ºéŸ³å‹ä½ï¼š
ã€ç›‘æ§åŠ å¼ºï¼šè¯·å®¿ä¸»ç»´æŒå‰§æƒ…åˆç†æ€§ã€‚ã€‘

ä½ æŠŠçº¸æ¡æŠ˜æˆç»†æ¡ï¼ŒåƒæŠ˜æ–­ä¸€æ ¹éª¨å¤´ã€‚`,
[
 {id:"4A",tag:["ç”œå® ","ä¸­é£é™©"],speaker:"prince",text:"å‘ŠçŸ¥å¤ªå­ï¼šè®©ä»–é™ªä½ è¿›å±€ã€‚",effect:{"å¤ªå­å¥½æ„Ÿ":+6,"ç³»ç»Ÿè­¦å‘Šå€¼":+2},route:{romance:+10,power:+2,dark:+0},flags:{princeInvolved:true},
  story:`ä½ é€’å‡ºçº¸æ¡ã€‚å¤ªå­çœ‹å®Œï¼ŒæŒ‡å°–å¾®é¡¿ã€‚

â€œä½ åœ¨æ‹¿è‡ªå·±å½“é¥µï¼Ÿâ€ä»–é—®ã€‚

ä½ ç¬‘ï¼šâ€œæ®¿ä¸‹ä¸ä¹Ÿæƒ³çœ‹çœ‹è°åœ¨å’¬é’©ï¼Ÿâ€

ä»–æŠ«ä¸Šå¤–è¢ï¼šâ€œèµ°ã€‚â€`},
 {id:"4B",tag:["æƒè°‹","ä¸­é£é™©"],speaker:"you",text:"äº²è‡ªè·Ÿè¸ªï¼šæ‹¿åˆ°ç¬¬ä¸€æ¬¡ç¡¬è¯æ®ã€‚",effect:{"è°‹ç•¥":+4,"åç¦»åº¦":+1,"è‹æ¸…è²æ€€ç–‘":+2},route:{romance:+0,power:+10,dark:+1},flags:{evidenceStep:+2},
  story:`ä½ å¸¦æš—å«æ½œå…¥å··å°¾ï¼Œè¿œè¿œçœ‹è§è‹æ¸…è²ä¸å†…ä¾äº¤é€’å°åŒ£ã€‚

ä½ è®©äººè®°ä¸‹åŒ£çº¹ä¸å°æ³¥ã€‚

è¯æ®å¼€å§‹é•¿å‡ºç‰™é½¿ã€‚`},
 {id:"4C",tag:["æ€æ¡Œ","é«˜é£é™©"],speaker:"you",highlight:true,text:"å¸¦äººé—¯å…¥ï¼šå½“åœºæ’•å¥¹çš„è„¸ã€‚",effect:{"æ€æ¡Œå€¼":+9,"åç¦»åº¦":+6,"ç³»ç»Ÿè­¦å‘Šå€¼":+12,"è´µå¥³å£°æœ›":-2},route:{romance:+1,power:+4,dark:+12},flags:{suFaceCrack:true},
  story:`ä½ å¸¦äººé—¯å…¥åé™¢ï¼Œç¯ç«éª¤äº®ã€‚

è‹æ¸…è²è¿˜æœªæ¥å¾—åŠè£…æ— è¾œï¼Œä½ å·²ç¬‘ç€é—®ï¼šâ€œæ·±å¤œä¼šå®¢ï¼Œæ¸…è²å¦¹å¦¹å¥½é›…å…´ã€‚â€

ç³»ç»Ÿç‹‚é¸£ï¼Œä½†ä½ æ›´å“ï¼šä½ è¦å¥¹å¬è§â€œå®³æ€•â€ã€‚`},
 {id:"4D",tag:["å…»æˆ","ä½é£é™©"],speaker:"you",text:"ä¸å‡ºé—¨ï¼šåè€Œå¸ƒä¸‹â€œåè·Ÿè¸ªâ€ã€‚",effect:{"å¿ƒæ™º":+3,"è°‹ç•¥":+2,"åç¦»åº¦":-1},route:{romance:+0,power:+5,dark:+0},flags:{counterTrack:true},
  story:`ä½ æ²¡åŠ¨ã€‚ä½ è®©äººæŠŠåŸé‡Œçœ¼çº¿æ¢äº†ä¸‰è½®ã€‚

å¯¹æ–¹è¶Šæƒ³ç›¯ä½ ï¼Œè¶Šç›¯ä¸åˆ°ä½ ã€‚

ä½ å­¦ä¼šäº†ï¼šä¸åŠ¨ä¹Ÿèƒ½èµ¢ã€‚`},
]],
    [5,"æµè¨€åå™¬",
`æ¸…æ™¨ï¼ŒåŸé‡Œæµè¨€éª¤èµ·ï¼šè¯´ä½ â€œå‹¾ç»“ä¸œå®«â€ï¼Œè¯´ä½ â€œå¿ƒæœ¯ä¸æ­£â€ã€‚

ç³»ç»Ÿè½»å¿«åœ°è¡¥åˆ€ï¼š
ã€ä¿®æ­£å»ºè®®ï¼šå®¿ä¸»åº”å›å½’å¥³é…æ¸©é¡ºäººè®¾ã€‚ã€‘

ä½ ç›¯ç€é•œå­é‡Œçš„è‡ªå·±ï¼Œç¬‘æ„æ…¢æ…¢çˆ¬ä¸Šæ¥ã€‚`,
[
 {id:"5A",tag:["ç”œå® ","ä¸­é£é™©"],speaker:"prince",text:"è®©å¤ªå­å…¬å¼€æŠ¤ä½ ä¸€æ¬¡ã€‚",effect:{"å¤ªå­å¥½æ„Ÿ":+8,"è´µå¥³å£°æœ›":+3},route:{romance:+12,power:+2,dark:+0},flags:{princeProtected:true},
  story:`ä¸œå®«ä¼ è¯ï¼šå¤ªå­è¦ä½ éšè¡Œå‡ºå¸­å®«å®´ã€‚

ä»–å½“ä¼—æ·¡å£°ä¸€å¥ï¼šâ€œå¥¹æ˜¯å­¤çš„äººã€‚â€

å…¨åœºé™å¾—åƒè¢«æä½å–‰å’™ã€‚

ä½ æ²¡è„¸çº¢â€”â€”ä½ åœ¨è®°è´¦ï¼šè¿™å¥è¯å€¼å¤šå°‘ç­¹ç ã€‚`},
 {id:"5B",tag:["æƒè°‹","ä¸­é£é™©"],speaker:"you",text:"æ”¾å‡ºåŠçœŸè¯æ®ï¼šè®©æµè¨€å’¬å›è‹æ¸…è²ã€‚",effect:{"è°‹ç•¥":+3,"è´µå¥³å£°æœ›":+2,"è‹æ¸…è²æ€€ç–‘":+3},route:{romance:+0,power:+12,dark:+2},flags:{evidenceStep:+1},
  story:`ä½ åªæ”¾å‡ºä¸€åŠï¼šä¸ç›¸åºœåé™¢å‡ºå…¥å†Œâ€œç¼ºé¡µâ€ã€‚

ä¼—äººæœ€çˆ±çŒœã€‚çŒœå¾—è¶Šå¤šï¼Œè¶Šä¼šæŠŠçŸ›å¤´æŒ‡å‘è‹æ¸…è²ã€‚

ä½ ç«™åœ¨æš—å¤„ï¼Œçœ‹ä»–ä»¬è‡ªç›¸æ®‹æ€ã€‚`},
 {id:"5C",tag:["æ€æ¡Œ","é«˜é£é™©"],speaker:"you",highlight:true,text:"å…¬å¼€æ’•ç ´ï¼šä½ å°±æ‰¿è®¤â€œæˆ‘å°±æ˜¯è¦æƒâ€ã€‚",effect:{"æ€æ¡Œå€¼":+9,"åç¦»åº¦":+6,"ç³»ç»Ÿè­¦å‘Šå€¼":+12,"å®¶æ—å£°æœ›":-2},route:{romance:+1,power:+6,dark:+12},
  story:`ä½ åœ¨å¯ºå‰å°é˜¶ä¸Šï¼Œå½“ä¼—ç¬‘é“ï¼šâ€œæˆ‘æ‰¿è®¤â€”â€”æˆ‘å°±æ˜¯æƒ³è¦æƒã€‚â€

äººç¾¤ç‚¸å¼€ã€‚

ä½ å¬è§ç³»ç»Ÿå´©æºƒå¼è­¦æŠ¥ï¼Œå´åªè§‰å¾—ç—›å¿«ï¼šç»ˆäºä¸è£…äº†ã€‚`},
 {id:"5D",tag:["å…»æˆ","ä½é£é™©"],speaker:"you",text:"å†·å¤„ç†ï¼šç¨³ä½å®¶æ—ä¸èº«ä½“ã€‚",effect:{"å¥åº·":+2,"å®¶æ—å£°æœ›":+2,"å¿ƒæ™º":+2},route:{romance:+0,power:+6,dark:+0},
  story:`ä½ è®©åºœé‡Œå…³é—¨è°¢å®¢ï¼Œåªå¯¹å¤–é€å‡ºä¸€å°ä½“é¢å›å‡½ã€‚

ä½ ä¸è¿½ç€æµè¨€è·‘ï¼Œä½ è®©æµè¨€è¿½ç€ä½ å–˜ä¸è¿‡æ°”ã€‚

ç¨³ï¼Œæ˜¯å¦ä¸€ç§ç‹ ã€‚`},
]],
    [6,"å¤ªå­è¯•æ¢",
`å¤ªå­æŠŠä½ å•ç‹¬ç•™åœ¨åæ®¿ã€‚

â€œæŸ³æ‰¶é£ï¼Œâ€ä»–ç¬¬ä¸€æ¬¡å«ä½ å…¨åï¼Œâ€œä½ åˆ°åº•æƒ³è¦ä»€ä¹ˆï¼Ÿâ€

ç³»ç»Ÿæç¤ºï¼š
ã€å›ç­”å°†å½±å“ä¸–ç•Œçº¿èµ°å‘ã€‚ã€‘`,
[
 {id:"6A",tag:["ç”œå® ","ä¸­é£é™©"],speaker:"prince",text:"ä½ æƒ³è¦ä»–ï¼šç›´çƒä½†ä¸å‘å¾®ã€‚",effect:{"å¤ªå­å¥½æ„Ÿ":+10,"åç¦»åº¦":+1},route:{romance:+16,power:+0,dark:+0},flags:{routeLockHint:"romance"},
  story:`ä½ çœ‹ç€ä»–çš„çœ¼ç›ï¼šâ€œæˆ‘æƒ³è¦ä½ â€”â€”ä½†ä¸æ˜¯æ–½èˆï¼Œæ˜¯å¹¶è‚©ã€‚â€

å¤ªå­å–‰ç»“å¾®åŠ¨ï¼ŒåŠæ™Œåªé“ï¼šâ€œèƒ†å­ä¸å°ã€‚â€

ä½ è½»å£°ï¼šâ€œæˆ‘ä¸€ç›´éƒ½ä¸å°ã€‚â€`},
 {id:"6B",tag:["æƒè°‹","ä¸­é£é™©"],speaker:"you",text:"ä½ è¦æƒï¼šæŠŠçˆ±æ”¾åˆ°ä¸€è¾¹ã€‚",effect:{"è°‹ç•¥":+4,"å®¶æ—å£°æœ›":+3,"åç¦»åº¦":+2},route:{romance:-1,power:+18,dark:+1},flags:{routeLockHint:"power"},
  story:`ä½ ç­”å¾—å¹²è„†ï¼šâ€œæˆ‘è¦æƒã€‚â€

å¤ªå­ç¬‘æ„ææ·¡ï¼šâ€œä½ å€’è¯šå®ã€‚â€

ä½ ä¹Ÿç¬‘ï¼šâ€œè¯šå®çš„äººæ›´éš¾è¢«æ‹¿æã€‚â€`},
 {id:"6C",tag:["æ€æ¡Œ","é«˜é£é™©"],speaker:"you",highlight:true,text:"ä½ å…¨éƒ½è¦ï¼šä½ è¦è§„çŸ©å´©ã€ä½ è¦äººè‡£è·ªã€‚",effect:{"æ€æ¡Œå€¼":+10,"åç¦»åº¦":+7,"ç³»ç»Ÿè­¦å‘Šå€¼":+14,"å¤ªå­å¥½æ„Ÿ":+2},route:{romance:+2,power:+10,dark:+16},flags:{routeLockHint:"dark"},
  story:`ä½ é è¿‘ä¸€æ­¥ï¼šâ€œæˆ‘è¦ä½ ï¼Œä¹Ÿè¦æƒï¼Œè¿˜è¦è¿™ç ´è§„çŸ©ç»™æˆ‘è·ªä¸‹ã€‚â€

å¤ªå­ç›¯ç€ä½ ï¼Œçœ¼åº•åƒèµ·äº†ç«ã€‚

ç³»ç»ŸæŠ¥è­¦ä¸åœï¼Œä½ å´åƒå¬è§æŒå£°ã€‚`},
 {id:"6D",tag:["å…»æˆ","ä½é£é™©"],speaker:"you",text:"ä½ è¦å…¬å¹³ï¼šå…ˆç¨³ä½ç³»ç»Ÿçš„â€œé“å¾·ç‰Œâ€ã€‚",effect:{"å¿ƒæ™º":+3,"åç¦»åº¦":-1,"ç³»ç»Ÿè­¦å‘Šå€¼":-2},route:{romance:+3,power:+8,dark:+0},
  story:`ä½ ç­”ï¼šâ€œæˆ‘è¦å…¬å¹³ã€‚â€

ç³»ç»ŸçŸ­æš‚æ²‰é»˜â€”â€”å®ƒæœ€æ€•ä½ æŠŠè‡ªå·±å†™æˆâ€œæ­£ä¹‰â€ã€‚

å¤ªå­çœ‹ä½ è®¸ä¹…ï¼šâ€œå…¬å¹³å¾ˆè´µã€‚â€

ä½ è¯´ï¼šâ€œæˆ‘ä¹°å¾—èµ·ã€‚â€`},
]],
    [7,"è‹æ¸…è²åæ‰‘",
`è‹æ¸…è²å¼€å§‹å¯¹ä½ ä¸‹æ­»æ‰‹â€”â€”å¥¹è¦æ¯ä½ åèŠ‚ã€‚

ç³»ç»Ÿå†·å£°ï¼š
ã€ä¿®æ­£äº‹ä»¶ï¼šåèŠ‚å±æœºæŠ•æ”¾ä¸­ã€‚ã€‘

ä½ æœ›ç€çƒ›ç«ï¼Œå¿½ç„¶æƒ³èµ·ä¸€å¥è¯ï¼šåˆ€å­ä¸ç å›å»ï¼Œå°±ä¼šç•™åœ¨ä½ éª¨å¤´é‡Œã€‚`,
[
 {id:"7A",tag:["ç”œå® ","ä¸­é£é™©"],speaker:"prince",text:"è®©å¤ªå­æ¥ä½ å›ä¸œå®«ï¼šæŠ¤åèŠ‚ä¹ŸæŠ¤å¿ƒã€‚",effect:{"å¤ªå­å¥½æ„Ÿ":+8,"è´µå¥³å£°æœ›":+3},route:{romance:+14,power:+2,dark:+0},flags:{princeProtected:true},
  story:`ä½ ä¸è§£é‡Šï¼Œä½ åªæŠŠé‚£å°â€œé™·å®³å¸–â€é€’ç»™å¤ªå­ã€‚

å¤ªå­å†·ç¬‘ï¼šâ€œå¥¹ä¹Ÿé…ï¼Ÿâ€

å½“å¤œï¼Œä¸œå®«è½¦é©¾åœåœ¨å°†å†›åºœé—¨å£â€”â€”ä½ è¢«å…¬å¼€æ¥èµ°ã€‚

å…¨åŸçŸ¥é“ï¼šä½ ä¸å¥½æƒ¹ã€‚`},
 {id:"7B",tag:["æƒè°‹","ä¸­é£é™©"],speaker:"you",text:"åè®¾è®¡ï¼šæŠŠå¥¹çš„å±€å˜æˆå¥¹çš„åˆ‘ã€‚",effect:{"è°‹ç•¥":+5,"è‹æ¸…è²æ€€ç–‘":+4,"åç¦»åº¦":+2},route:{romance:+0,power:+16,dark:+3},flags:{hasEvidence:true},
  story:`ä½ è®©æš—å«æ¢äº†å¥¹å®‰æ’çš„â€œè§è¯äººâ€ã€‚

ç­‰å¥¹ä¸¾åˆ€æ—¶ï¼Œåˆ€æŸ„å·²è¢«ä½ æ¡ä½ã€‚

å¥¹çš„â€œæ¸…ç™½â€ç¬¬ä¸€æ¬¡è¢«æ’•å¼€ï¼Œéœ²å‡ºé‡Œé¢çš„è„ã€‚

ä½ æ‹¿åˆ°å…³é”®è¯æ®ã€‚`},
 {id:"7C",tag:["æ€æ¡Œ","é«˜é£é™©"],speaker:"you",highlight:true,text:"ç›´æ¥æ’•ç ´è„¸ï¼šå½“ä¼—ç‚¹åå¥¹å°±æ˜¯æ¯’è²ã€‚",effect:{"æ€æ¡Œå€¼":+11,"åç¦»åº¦":+8,"ç³»ç»Ÿè­¦å‘Šå€¼":+14,"è´µå¥³å£°æœ›":-3},route:{romance:+1,power:+8,dark:+18},flags:{suFaceCrack:true},
  story:`ä½ åœ¨å®´ä¸Šä¸¾æ¯ï¼Œå¿½ç„¶ç¬‘ï¼šâ€œè‹æ¸…è²ï¼Œä½ é‚£ä¸€å¥—æ¼”å¤Ÿäº†å—ï¼Ÿâ€

å…¨åœºå“—ç„¶ã€‚

å¥¹çœ¼çœ¶ç¬çº¢ï¼Œæƒ³è£…æŸ”å¼±â€”â€”ä½ æ›´å¿«ï¼šâ€œåˆ«å“­ï¼Œä½ å“­ä¸€æ¬¡ï¼Œæˆ‘å°±æ­ä½ ä¸€å±‚çš®ã€‚â€`},
 {id:"7D",tag:["å…»æˆ","ä½é£é™©"],speaker:"you",text:"ç¨³ï¼šå…ˆä¿å‘½å†åæ€ã€‚",effect:{"å¥åº·":+3,"å¿ƒæ™º":+3,"å®¶æ—å£°æœ›":+2},route:{romance:+0,power:+8,dark:+0},
  story:`ä½ ä¸è¿›å®´ï¼Œä½ æŠŠè‡ªå·±è—è¿›â€œä½“é¢â€é‡Œã€‚

ç­‰å¥¹æ‰¾ä¸åˆ°ä½ ï¼Œå±€å°±æ•£ã€‚

ä½ æŠŠå‘½å…ˆæ”¥ç¨³ã€‚`},
]],
    [8,"ç¬¬ä¸€æ¬¡çœŸæ­£èƒœåˆ©",
`æ— è®ºä½ èµ°å“ªæ¡è·¯ï¼Œè‹æ¸…è²ç¬¬ä¸€æ¬¡åœ¨ä½ é¢å‰å¤±æ‰‹ã€‚

ç³»ç»Ÿæç¤ºï¼š
ã€ä¸–ç•Œçº¿ä¿®æ­£å¤±è´¥ç‡ 32%ã€‘

ä½ çŸ¥é“â€”â€”ä»ä»Šå¤©èµ·ï¼Œå®ƒä¼šæ›´ç‹ ã€‚`,
[
 {id:"8A",tag:["ç”œå® ","ä¸­é£é™©"],speaker:"prince",text:"å¤ªå­é€’ä½ ä¸€ç›ç¯ï¼šä½ ç¬¬ä¸€æ¬¡ä¸å†ç‹¬è¡Œã€‚",effect:{"å¤ªå­å¥½æ„Ÿ":+8,"å¿ƒæ™º":+3},route:{romance:+12,power:+2,dark:+0},
  story:`å¤ªå­æŠŠä¸€ç›ç¯æ”¾åˆ°ä½ æŒå¿ƒï¼šâ€œå¤œè·¯åˆ«èµ°å¤ªå¿«ã€‚â€

ä½ æ¡ç´§ç¯æŸ„ï¼Œå¿½ç„¶è§‰å¾—çƒ«ã€‚

ä¸æ˜¯ç¯çƒ«ï¼Œæ˜¯ä½ å¿ƒå£ã€‚`},
 {id:"8B",tag:["æƒè°‹","ä¸­é£é™©"],speaker:"you",text:"ä¹˜èƒœè¿½å‡»ï¼šæŠŠè¯æ®åšæˆé“é“¾ã€‚",effect:{"è°‹ç•¥":+4,"å®¶æ—å£°æœ›":+3},route:{romance:+0,power:+14,dark:+2},flags:{hasEvidence:true},
  story:`ä½ æŠŠè¯æ®åˆ†æˆä¸‰ä»½ï¼šä¸€ä»½åœ¨ä½ æ‰‹ï¼Œä¸€ä»½åœ¨å¤ªå­æ‰‹ï¼Œä¸€ä»½åœ¨å¤–äººæ‰‹ã€‚

ä»»ä½•äººæƒ³ç¿»æ¡ˆï¼Œéƒ½å¾—å…ˆå’¬æ–­è‡ªå·±çš„å–‰ã€‚

ä½ å¼€å§‹åƒçœŸæ­£çš„æ£‹æ‰‹ã€‚`},
 {id:"8C",tag:["æ€æ¡Œ","é«˜é£é™©"],speaker:"you",highlight:true,text:"ä½ è®©ç³»ç»Ÿå½“ä¼—å¤±å£°ï¼šå…¬å¼€æŒ‘æˆ˜â€œä¿®æ­£â€ã€‚",effect:{"æ€æ¡Œå€¼":+12,"åç¦»åº¦":+8,"ç³»ç»Ÿè­¦å‘Šå€¼":+16},route:{romance:+1,power:+8,dark:+18},
  story:`ä½ åœ¨å¿ƒé‡Œå¯¹ç³»ç»Ÿè¯´ï¼šâ€œä½ æ¥ä¿®æ­£å•Šã€‚â€

ç³»ç»Ÿç«Ÿç„¶å¡é¡¿äº†ä¸€ç¬ã€‚

ä½ ç¬‘å‡ºæ¥ï¼šå®ƒä¸æ˜¯ç¥ï¼Œå®ƒåªæ˜¯æ¡é“¾å­â€”â€”è€Œä½ ä¼šæŠŠé“¾å­æ‹½æ–­ã€‚`},
 {id:"8D",tag:["å…»æˆ","ä½é£é™©"],speaker:"you",text:"ç¨³ä½çŠ¶æ€ï¼šå‡†å¤‡è¿æ¥æ›´ç‹ çš„æƒ©ç½šæ½®ã€‚",effect:{"å¥åº·":+3,"å¿ƒæ™º":+3,"ç³»ç»Ÿè­¦å‘Šå€¼":-2},route:{romance:+0,power:+8,dark:+0},
  story:`ä½ æ²¡åº†åŠŸã€‚ä½ å…ˆç¡ä¸€è§‰ã€‚

ä½ çŸ¥é“çœŸæ­£çš„æˆ˜ï¼Œä¸åœ¨ä»Šå¤©ã€‚

ä½ æŠŠåŠ›æ°”ç•™ç»™â€œç¿»ç›˜â€ã€‚`},
]],
    [9,"å®«å®´åˆ€å…‰",
`çš‡åè®¾å®´ï¼Œä¼—äººçœ‹ä½ åƒçœ‹æ–°é²œåˆ€ã€‚

è‹æ¸…è²ä¹Ÿåœ¨ï¼Œå¥¹ç¬‘å¾—ç”œï¼Œçœ¼åº•å´è—æ¯’ã€‚

ç³»ç»Ÿæç¤ºï¼š
ã€æ­¤å¤„ä¸ºå¼ºä¿®æ­£èŠ‚ç‚¹ã€‚ã€‘`,
[
 {id:"9A",tag:["ç”œå® ","ä¸­é£é™©"],speaker:"prince",text:"å¤ªå­å½“ä¼—æ›¿ä½ å¤¹èœï¼šç”œå¾—åƒå®£å‘Šã€‚",effect:{"å¤ªå­å¥½æ„Ÿ":+10,"è´µå¥³å£°æœ›":+3},route:{romance:+16,power:+1,dark:+0},flags:{princeProtected:true},
  story:`å¤ªå­åœ¨ä¼—ç›®ç½ç½ä¸‹æ›¿ä½ å¤¹äº†ä¸€ç­·å­èœï¼šâ€œå¥¹åƒä¸äº†è¾£ã€‚â€

å…¨åœºé™äº†ä¸€ç¬ã€‚

ä½ ä½å¤´åƒä¸‹å»ï¼šè¾£ä¸è¾£ä¸é‡è¦ï¼Œé‡è¦çš„æ˜¯â€”â€”ä»–ç«™åœ¨ä½ è¿™è¾¹ã€‚`},
 {id:"9B",tag:["æƒè°‹","ä¸­é£é™©"],speaker:"you",text:"å€Ÿçš‡åä¸€å¥è¯ï¼šæŠŠä½ é€è¿›æƒåŠ›åœˆã€‚",effect:{"è°‹ç•¥":+4,"å®¶æ—å£°æœ›":+4},route:{romance:+0,power:+16,dark:+2},
  story:`ä½ ä»¥ä¸‰å¥è¯è®©çš‡åç‚¹å¤´ï¼šâ€œå°†å†›åºœå®¶é£ï¼Œæœ€é€‚åˆç¨³ä¸œå®«ã€‚â€

ä¸€å¥è¯ï¼Œç­‰äºåŠå¼ æŠ¤èº«ç¬¦ã€‚

ä½ æŠŠå®ƒæ”¶å¥½ï¼Œå‡†å¤‡æ¢æ›´å¤§çš„ç­¹ç ã€‚`},
 {id:"9C",tag:["æ€æ¡Œ","é«˜é£é™©"],speaker:"you",highlight:true,text:"å½“ä¼—æ€¼è‹æ¸…è²ï¼šå¥¹è¶Šå“­ä½ è¶Šç‹ ã€‚",effect:{"æ€æ¡Œå€¼":+10,"åç¦»åº¦":+7,"ç³»ç»Ÿè­¦å‘Šå€¼":+14,"è‹æ¸…è²æ€€ç–‘":+4},route:{romance:+1,power:+8,dark:+18},
  story:`è‹æ¸…è²è½»å£°ï¼šâ€œå§å§åˆ«æ€ªæˆ‘ã€‚â€

ä½ ç¬‘ï¼šâ€œæˆ‘ä¸æ€ªä½ ï¼Œæˆ‘åªä¼šé€ä½ ä¸‹å»ã€‚â€

å¥¹çš„çœ¼æ³ªåˆšå‡ºæ¥ï¼Œä½ ä¸€å¥ï¼šâ€œåˆ«æ¼”äº†ã€‚â€å…¨åœºå‡å›ºã€‚

ä½ å–œæ¬¢è¿™ç§å‡å›ºâ€”â€”åƒåˆ€æ’è¿›è‚‰ã€‚`},
 {id:"9D",tag:["å…»æˆ","ä½é£é™©"],speaker:"you",text:"ä»¥é€€ä¸ºè¿›ï¼šä¿ç•™åº•ç‰Œã€‚",effect:{"å¿ƒæ™º":+3,"ç³»ç»Ÿè­¦å‘Šå€¼":-2,"åç¦»åº¦":-1},route:{romance:+2,power:+10,dark:+0},
  story:`ä½ ä¸æ¥æ‹›ï¼Œä½ åªç¬‘ç€æ•¬é…’ã€‚

ä½ æŠŠä¸€åˆ‡éƒ½ç•™åˆ°â€œæ›´åˆé€‚çš„æ—¶æœºâ€ã€‚

çœŸæ­£çš„ç‹ ï¼Œä»ä¸æ€¥ç€å¼ã€‚`},
]],
    [10,"ç³»ç»Ÿå‡çº§",
`ç¬¬åæ—¥ï¼Œç³»ç»Ÿå¿½ç„¶å‡çº§ã€‚

ã€æ–°è§„åˆ™ï¼šåç¦»åº¦ä¸è­¦å‘Šå€¼å°†å…±åŒè§¦å‘â€œå¼ºæƒ©ç½šâ€ã€‚ã€‘

ä½ çœ‹ç€æç¤ºï¼Œåƒçœ‹ä¸€æ¡æ›´ç²—çš„é”é“¾ã€‚`,
[
 {id:"10A",tag:["ç”œå® ","ä¸­é£é™©"],speaker:"prince",text:"ä½ æŠŠææƒ§è¯´ç»™å¤ªå­å¬ï¼šæ¢æ¥ä¸€å¥æ‰¿è¯ºã€‚",effect:{"å¤ªå­å¥½æ„Ÿ":+8,"å¿ƒæ™º":+4,"ç³»ç»Ÿè­¦å‘Šå€¼":+2},route:{romance:+14,power:+2,dark:+0},
  story:`ä½ ç¬¬ä¸€æ¬¡æ‰¿è®¤ï¼šâ€œæˆ‘ä¹Ÿä¼šæ€•ã€‚â€

å¤ªå­æŠŠä½ æŠ¤åœ¨èº«åï¼šâ€œæ€•å°±ç«™åˆ°å­¤è¿™è¾¹ã€‚â€

ä½ å¬è§ç³»ç»Ÿåœ¨è¿œå¤„å’¬ç‰™â€”â€”å®ƒè®¨åŒä½ æœ‰â€œç›Ÿå‹â€ã€‚`},
 {id:"10B",tag:["æƒè°‹","ä¸­é£é™©"],speaker:"you",text:"ä½ åç ”ç©¶ç³»ç»Ÿï¼šæ‰¾å®ƒçš„æ¼æ´ã€‚",effect:{"è°‹ç•¥":+5,"åç¦»åº¦":+2,"ç³»ç»Ÿè­¦å‘Šå€¼":-2},route:{romance:+0,power:+16,dark:+3},flags:{systemCrack:true},
  story:`ä½ æŠŠç³»ç»Ÿå½“æ•Œäººç ”ç©¶ï¼šè§¦å‘æ¡ä»¶ã€æƒ©ç½šé˜ˆå€¼ã€ä¿®æ­£èŠ‚ç‚¹ã€‚

å®ƒè¶Šåƒè§„åˆ™ï¼Œè¶Šèƒ½è¢«åˆ©ç”¨ã€‚

ä½ ç¬¬ä¸€æ¬¡æ‘¸åˆ°å®ƒçš„â€œæ¼æ´è¾¹ç¼˜â€ã€‚`},
 {id:"10C",tag:["æ€æ¡Œ","é«˜é£é™©"],speaker:"you",highlight:true,text:"ä½ æ•…æ„è§¦å‘å¼ºæƒ©ç½šï¼šéªŒè¯å®ƒåˆ°åº•å¤šç‹ ã€‚",effect:{"æ€æ¡Œå€¼":+12,"åç¦»åº¦":+8,"ç³»ç»Ÿè­¦å‘Šå€¼":+18},route:{romance:+0,power:+8,dark:+20},
  story:`ä½ åƒæŠŠæ‰‹ä¼¸è¿›ç«é‡Œã€‚

ç—›æ˜¯çœŸç—›ï¼Œä½†ä½ ä¹Ÿçœ‹æ¸…äº†ï¼šå®ƒçš„æƒ©ç½šä¸æ˜¯æ— é™çš„ï¼Œå®ƒä¹Ÿä¼šâ€œå¡é¡¿â€ã€‚

ä½ èˆ”äº†èˆ”å”‡ï¼šåŸæ¥å¯ä»¥æ‰“ã€‚`},
 {id:"10D",tag:["å…»æˆ","ä½é£é™©"],speaker:"you",text:"ç¨³ä½ï¼šæŠŠè¡€æ¡å’Œå¿ƒæ™ºæŠ¬æ»¡ã€‚",effect:{"å¥åº·":+4,"å¿ƒæ™º":+3,"ç³»ç»Ÿè­¦å‘Šå€¼":-2},route:{romance:+1,power:+10,dark:+0},
  story:`ä½ å¼€å§‹è§„å¾‹é¥®é£Ÿã€ç»ƒä½“ã€ç¡çœ ã€‚

ç³»ç»Ÿæœ€æ¨ä½ è¿™ç‚¹ï¼šä½ ä¸é æƒ…ç»ªæ´»ï¼Œä½ é æ§åˆ¶æ´»ã€‚`},
]],
    [11,"å¤œé›¨åŒä¼",
`å¤œé›¨çªè‡³ï¼Œä½ ä¸å¤ªå­è¢«å›°å»Šä¸‹ã€‚

è¿‘å¾—èƒ½å¬è§å½¼æ­¤å‘¼å¸ã€‚

ç³»ç»Ÿæç¤ºï¼š
ã€æƒ…æ„Ÿçº¿å¼‚å¸¸å‡æ¸©ã€‚ã€‘`,
[
 {id:"11A",tag:["ç”œå® ","ä¸­é£é™©"],speaker:"prince",text:"åŒä¼å›å»Šï¼šæš§æ˜§å˜æˆé»˜å¥‘ã€‚",effect:{"å¤ªå­å¥½æ„Ÿ":+10,"å¿ƒæ™º":+2},route:{romance:+18,power:+0,dark:+0},
  story:`å¤ªå­æ’‘ä¼ï¼Œä¼æ²¿å‹å¾—å¾ˆä½ã€‚

é›¨å£°å¾ˆåµï¼Œä½ å´å¬è§ä»–ä¸€å¥ï¼šâ€œåˆ«å†é€å¼ºã€‚â€

ä½ è½»è½»â€œå—¯â€äº†ä¸€å£°â€”â€”åƒæŠŠå¿ƒäº¤å‡ºå»åŠå¯¸ã€‚`},
 {id:"11B",tag:["æƒè°‹","ä¸­é£é™©"],speaker:"you",text:"å€Ÿé›¨å¤œè°ˆæ¡ä»¶ï¼šä½ è¦çœŸæ­£çš„ä¿éšœã€‚",effect:{"è°‹ç•¥":+4,"å¤ªå­å¥½æ„Ÿ":+2},route:{romance:+3,power:+14,dark:+2},
  story:`ä½ è¯´ï¼šâ€œæˆ‘è¦ä¸€ä¸ªä¸ä¼šè¢«éšæ‰‹ä¸¢å¼ƒçš„ä½ç½®ã€‚â€

å¤ªå­çœ‹ä½ ï¼šâ€œä½ è¦å¤ªå­å¦ƒï¼Ÿâ€

ä½ ç¬‘ï¼šâ€œæˆ‘æ›´è¦èƒ½ç«™ç€çš„èµ„æ ¼ã€‚â€`},
 {id:"11C",tag:["æ€æ¡Œ","é«˜é£é™©"],speaker:"you",highlight:true,text:"ä½ æ•…æ„æ’©æ‹¨ï¼šè®©ä»–ä¹Ÿå¤±æ§ä¸€æ¬¡ã€‚",effect:{"æ€æ¡Œå€¼":+8,"åç¦»åº¦":+6,"å¤ªå­å¥½æ„Ÿ":+6,"ç³»ç»Ÿè­¦å‘Šå€¼":+10},route:{romance:+10,power:+4,dark:+14},
  story:`ä½ æŠ¬æ‰‹æ›¿ä»–æ‹‚å»è‚©ä¸Šé›¨ç ï¼ŒæŒ‡å°–åœå¾—å¤ªä¹…ã€‚

å¤ªå­çœ¼ç¥æš—ä¸‹å»ï¼šâ€œä½ åœ¨ç©ç«ï¼Ÿâ€

ä½ ç¬‘ï¼šâ€œæˆ‘ä¸€ç›´åœ¨ç©ç«ï¼Œæ®¿ä¸‹è¦ä¸è¦ä¸€èµ·ï¼Ÿâ€`},
 {id:"11D",tag:["å…»æˆ","ä½é£é™©"],speaker:"you",text:"é€€åŠæ­¥ï¼šæŠŠæš§æ˜§å‹å›åˆ€é˜ã€‚",effect:{"å¿ƒæ™º":+3,"ç³»ç»Ÿè­¦å‘Šå€¼":-2},route:{romance:+2,power:+10,dark:+0},
  story:`ä½ ä¸é è¿‘ã€‚

ä½ æŠŠæ‰€æœ‰å¿ƒè·³å‹å›èƒ¸è…”ï¼šç°åœ¨è¿˜ä¸æ˜¯æ²‰æººçš„æ—¶å€™ã€‚

ä½ æ›´æƒ³èµ¢ã€‚`},
]],
    [12,"ä¿®ç½—åœºè¾¹ç¼˜",
`è‹æ¸…è²å¼€å§‹å…¬å¼€â€œç¤ºå¼±â€ï¼ŒæŠŠè‡ªå·±æ‘†æˆå—å®³è€…ã€‚

å¥¹æƒ³ç”¨èˆ†è®ºé€¼æ­»ä½ ã€‚

ç³»ç»Ÿæç¤ºï¼š
ã€å»ºè®®ï¼šä¿æŒæ¸©é¡ºï¼Œé¿å…èˆ†è®ºåå™¬ã€‚ã€‘`,
[
 {id:"12A",tag:["ç”œå® ","ä¸­é£é™©"],speaker:"prince",text:"å¤ªå­ç‰µä½ å‡ºåœºï¼šä½ ä¸å†å­¤å†›ã€‚",effect:{"å¤ªå­å¥½æ„Ÿ":+8,"è´µå¥³å£°æœ›":+4},route:{romance:+14,power:+2,dark:+0},flags:{princeProtected:true},
  story:`ä½ ä¸å¤ªå­åŒå…¥å®´å…ï¼Œä¼—äººè‡ªåŠ¨è®©å¼€è·¯ã€‚

è‹æ¸…è²è„¸è‰²å¾®ç™½ã€‚

å¥¹ç¬¬ä¸€æ¬¡æ„è¯†åˆ°ï¼šä½ ä¸æ˜¯å¥¹çš„å«è„šçŸ³ï¼Œä½ æ˜¯å¥¹çš„å¤©å ‘ã€‚`},
 {id:"12B",tag:["æƒè°‹","ä¸­é£é™©"],speaker:"you",text:"ä½ æ”¾å‡ºâ€œå…³é”®è¯æ®è¾¹è§’â€ï¼Œé€¼å¥¹è‡ªä¹±é˜µè„šã€‚",effect:{"è°‹ç•¥":+4,"è‹æ¸…è²æ€€ç–‘":+5},route:{romance:+0,power:+16,dark:+2},flags:{hasEvidence:true},
  story:`ä½ åªè¯´ä¸€å¥ï¼šâ€œåé™¢å‡ºå…¥å†Œç¼ºé¡µï¼Œè°æ’•çš„ï¼Ÿâ€

å¥¹çœ¼ç¥ä¸€æ™ƒï¼Œç¬‘å®¹å·®ç‚¹ç¢ã€‚

ä½ çŸ¥é“ï¼šå¥¹å¿«å´©äº†ã€‚`},
 {id:"12C",tag:["æ€æ¡Œ","é«˜é£é™©"],speaker:"you",highlight:true,text:"å½“ä¼—ç‚¹åï¼šä½ å°±æ˜¯æ¶æ„ï¼Œæˆ‘å°±æ˜¯æ¸…é†’ã€‚",effect:{"æ€æ¡Œå€¼":+10,"åç¦»åº¦":+7,"ç³»ç»Ÿè­¦å‘Šå€¼":+12},route:{romance:+2,power:+8,dark:+18},
  story:`ä½ ä¸¾æ¯ï¼šâ€œè‹æ¸…è²ï¼Œä½ çš„â€˜æ— å¿ƒâ€™ï¼Œä»æ¥éƒ½å¾ˆç”¨å¿ƒã€‚â€

å…¨åœºå“—ç„¶ã€‚

ç³»ç»ŸæŠ¥è­¦ï¼Œä½ å´è§‰å¾—å¥½ç¬‘ï¼šåŸæ¥çœŸè¯è¿™ä¹ˆå“äººã€‚`},
 {id:"12D",tag:["å…»æˆ","ä½é£é™©"],speaker:"you",text:"ç¨³ï¼šå»ç»ƒæ­¦ã€ç»ƒå¿ƒã€ç»ƒè€æ€§ã€‚",effect:{"å¥åº·":+3,"å¿ƒæ™º":+3},route:{romance:+0,power:+10,dark:+0},
  story:`ä½ æŠŠè‡ªå·±äº¤ç»™è®­ç»ƒã€‚

ç­‰ä½ å†å›å®´å¸­ï¼Œä½ ä¼šæ›´åƒä¸€æŠŠâ€œä¸ä¼šæŠ˜çš„åˆ€â€ã€‚`},
]],
    [13,"è¯æ®æˆé“¾",
`ä½ æ‰‹é‡Œçš„ç¢è¯æ®å¼€å§‹è¿æˆçº¿ã€‚

ç³»ç»Ÿæç¤ºï¼š
ã€æ£€æµ‹åˆ°å‰§æƒ…å¤–è¯æ®é“¾ã€‚è¯·å®¿ä¸»åœæ­¢ã€‚ã€‘

ä½ ç¬‘ï¼šåœæ­¢ï¼Ÿä½ æ‰åˆšå¼€å§‹ã€‚`,
[
 {id:"13A",tag:["ç”œå® ","ä¸­é£é™©"],speaker:"prince",text:"ä¸å¤ªå­å…±äº«è¯æ®ï¼šä½ ä»¬æˆä¸ºå…±çŠ¯ã€‚",effect:{"å¤ªå­å¥½æ„Ÿ":+6,"è°‹ç•¥":+2},route:{romance:+12,power:+6,dark:+0},flags:{hasEvidence:true},
  story:`ä½ æŠŠè¯æ®æ”¾åœ¨å¤ªå­æ¡ˆä¸Šã€‚

å¤ªå­åˆä¸Šå†Œå­ï¼šâ€œå¥½ã€‚å¥¹è·‘ä¸äº†ã€‚â€

ä½ å¿½ç„¶æ˜ç™½ï¼šä¿¡ä»»æ˜¯æœ€è´µçš„æ­¦å™¨ã€‚`},
 {id:"13B",tag:["æƒè°‹","ä¸­é£é™©"],speaker:"you",text:"æŠŠè¯æ®é€åˆ°çš‡åè€³è¾¹ï¼šå€ŸåŠ¿å‹æ­»å¥¹ã€‚",effect:{"å®¶æ—å£°æœ›":+5,"è°‹ç•¥":+3},route:{romance:+0,power:+18,dark:+2},flags:{queenAware:true,hasEvidence:true},
  story:`ä½ åœ¨å®«ä¸­å¥³å®˜å¤„ç•™ä¸‹ä¸€å¥ï¼šâ€œå‡ºå…¥å†Œç¼ºé¡µï¼Œä¸ä¸œå®«å†…ä¾æœ‰å…³ã€‚â€

çš‡åæœ€æ¨æ±¡ç‚¹ã€‚

ä½ æŠŠåˆ€é€’åˆ°äº†æœ€ä¼šç”¨åˆ€çš„äººæ‰‹é‡Œã€‚`},
 {id:"13C",tag:["æ€æ¡Œ","é«˜é£é™©"],speaker:"you",highlight:true,text:"é€¼å¥¹å½“åœºè®¤é”™ï¼šè¦å¥¹è·ªã€‚",effect:{"æ€æ¡Œå€¼":+12,"åç¦»åº¦":+8,"ç³»ç»Ÿè­¦å‘Šå€¼":+14,"è‹æ¸…è²æ€€ç–‘":+4},route:{romance:+1,power:+10,dark:+20},flags:{suFaceCrack:true,hasEvidence:true},
  story:`ä½ æŠŠè¯æ®å¾€å¥¹é¢å‰ä¸€æ‰”ï¼šâ€œè·ªã€‚â€

å¥¹æƒ³å“­ï¼Œä½ æ›´å†·ï¼šâ€œå“­æ²¡ç”¨ï¼Œè·ªæ‰æœ‰ç”¨ã€‚â€

ç³»ç»Ÿå°–å«ï¼Œä½ å´åƒå¬è§æŒå£°ã€‚`},
 {id:"13D",tag:["å…»æˆ","ä½é£é™©"],speaker:"you",text:"è¡¥è¡€è¡¥å¿ƒï¼šå‡†å¤‡ç»ˆå±€ã€‚",effect:{"å¥åº·":+4,"å¿ƒæ™º":+3},route:{romance:+1,power:+10,dark:+0},
  story:`ä½ æŠŠèº«å¿ƒå…»åˆ°æœ€å¼ºã€‚

ä½ çŸ¥é“ç»ˆå±€å¿«åˆ°äº†ï¼šè¦ä¹ˆä½ èµ¢ï¼Œè¦ä¹ˆä½ æ­»ã€‚`},
]],
    [14,"å¤ªå­é€‰æ‹©",
`å¤ªå­è¦åšé€‰æ‹©ï¼šå…¬å¼€ç«™ä½ ï¼Œæ„å‘³ç€ä¸ä¸ç›¸åºœæ’•ç ´ã€‚

ç³»ç»Ÿæç¤ºï¼š
ã€æ­¤ä¸ºå…³é”®èŠ‚ç‚¹ã€‚ã€‘`,
[
 {id:"14A",tag:["ç”œå® ","ä¸­é£é™©"],speaker:"prince",text:"ä½ è¦ä»–å…¬å¼€ï¼šæŠŠä½ æŠ¬åˆ°é˜³å…‰ä¸‹ã€‚",effect:{"å¤ªå­å¥½æ„Ÿ":+10,"è´µå¥³å£°æœ›":+3,"ç³»ç»Ÿè­¦å‘Šå€¼":+2},route:{romance:+18,power:+2,dark:+0},flags:{princeProtected:true},
  story:`ä½ è¯´ï¼šâ€œæˆ‘ä¸è¦èº²ã€‚â€

å¤ªå­çœ‹ä½ è®¸ä¹…ï¼šâ€œå¥½ã€‚â€

å½“å¤œï¼Œä¸œå®«å‘å‡ºæ˜æ—¨ï¼šä½ åˆ—å…¥æ­£é€‰ã€‚

å…¨åŸå“—ç„¶ï¼Œè‹æ¸…è²è„¸è‰²å‘é’ã€‚`},
 {id:"14B",tag:["æƒè°‹","ä¸­é£é™©"],speaker:"you",text:"ä½ è¦åˆ©ç›Šï¼šè®©ä»–ç”¨ä½ æ¢ä¸ç›¸åºœçš„å‘½é—¨ã€‚",effect:{"è°‹ç•¥":+4,"å®¶æ—å£°æœ›":+4},route:{romance:-1,power:+18,dark:+2},
  story:`ä½ è¯´ï¼šâ€œæˆ‘å¯ä»¥ç«™åˆ°å°å‰ï¼Œä½†æˆ‘è¦ä½ æ¢ä¸ç›¸åºœçš„å‘½é—¨ã€‚â€

å¤ªå­è½»ç¬‘ï¼šâ€œä½ çœŸç‹ ã€‚â€

ä½ ç­”ï¼šâ€œä¸ç‹ çš„äººï¼Œæ´»ä¸äº†ã€‚â€`},
 {id:"14C",tag:["æ€æ¡Œ","é«˜é£é™©"],speaker:"you",highlight:true,text:"ä½ é€¼ä»–è¡¨æ€ï¼šä»Šå¤©ä¸ç«™ä½ ï¼Œæ˜å¤©ä½ å°±æ€ä¸œå®«ã€‚",effect:{"æ€æ¡Œå€¼":+10,"åç¦»åº¦":+7,"ç³»ç»Ÿè­¦å‘Šå€¼":+12,"å¤ªå­å¥½æ„Ÿ":+4},route:{romance:+4,power:+10,dark:+18},
  story:`ä½ ç¬‘ï¼šâ€œæ®¿ä¸‹ä»Šæ—¥ä¸ç«™æˆ‘ï¼Œæ˜æ—¥æˆ‘å°±æ€ä¸œå®«ã€‚â€

å¤ªå­çœ¸è‰²ä¸€æ²‰ï¼Œå´å¿½ç„¶ç¬‘ï¼šâ€œä½ çœŸæ•¢ã€‚â€

ä½ ç­”ï¼šâ€œæˆ‘ä¸€ç›´æ•¢ã€‚â€`},
 {id:"14D",tag:["å…»æˆ","ä½é£é™©"],speaker:"you",text:"ä½ ä¸é€¼ä»–ï¼šä½ å…ˆæŠŠæ£‹ä¸‹å®Œã€‚",effect:{"å¿ƒæ™º":+3,"è°‹ç•¥":+2,"ç³»ç»Ÿè­¦å‘Šå€¼":-2},route:{romance:+2,power:+12,dark:+0},
  story:`ä½ ä¸é€¼å¤ªå­ï¼Œä½ é€¼è‡ªå·±ã€‚

ä½ ç»§ç»­ç»‡è¯æ®ç½‘ï¼šç­‰ç½‘æ”¶ç´§ï¼Œä»–è‡ªç„¶åªèƒ½ç«™ä½ ã€‚`},
]],
    [15,"æƒ…æ„Ÿçˆ†å‘",
`å¤œæ·±ï¼Œå¤ªå­æ¥è§ä½ ã€‚

â€œæŸ³æ‰¶é£ï¼Œâ€ä»–ä½å£°ï¼Œâ€œä½ åˆ°åº•ä¿¡ä¸ä¿¡å­¤ï¼Ÿâ€

ç³»ç»Ÿæç¤ºï¼š
ã€æƒ…æ„Ÿçº¿å¯èƒ½å¯¼è‡´å¤§å¹…åç¦»ã€‚ã€‘`,
[
 {id:"15A",tag:["ç”œå® ","ä¸­é£é™©"],speaker:"prince",text:"ä½ ä¿¡ä»–ï¼šæ‹¥æŠ±ä¸€æ¬¡ï¼Œå¿ƒé˜²è£‚å¼€ã€‚",effect:{"å¤ªå­å¥½æ„Ÿ":+12,"å¿ƒæ™º":+3},route:{romance:+22,power:+0,dark:+0},
  story:`ä½ æ²¡æœ‰å˜´ç¡¬ï¼Œä½ ç›´æ¥æŠ±ä½ä»–ã€‚

å¤ªå­èº«å­ä¸€åƒµï¼Œéšå³æ›´ç´§åœ°å›æŠ±ã€‚

ä½ å¬è§ä»–åœ¨ä½ è€³è¾¹è¯´ï¼šâ€œåˆ«æ€•ã€‚â€`},
 {id:"15B",tag:["æƒè°‹","ä¸­é£é™©"],speaker:"you",text:"ä½ ä¿¡ä¸€åŠï¼šç»™ä»–æ¡ä»¶ï¼Œä¹Ÿç»™è‡ªå·±é€€è·¯ã€‚",effect:{"è°‹ç•¥":+4,"å¤ªå­å¥½æ„Ÿ":+3},route:{romance:+6,power:+16,dark:+2},
  story:`ä½ è¯´ï¼šâ€œæˆ‘ä¿¡ä½ ï¼Œä½†æˆ‘æ›´ä¿¡â€˜è¯æ®â€™ã€‚â€

å¤ªå­ç¬‘ï¼šâ€œå¥½ã€‚ä½ è¦é€€è·¯ï¼Œå­¤ç»™ä½ ã€‚â€`},
 {id:"15C",tag:["æ€æ¡Œ","é«˜é£é™©"],speaker:"you",highlight:true,text:"ä½ æŠŠçˆ±å½“åˆ€ï¼šä½ è¦ä»–ä¹Ÿä¸ºä½ å¤±æ§ã€‚",effect:{"æ€æ¡Œå€¼":+10,"åç¦»åº¦":+7,"ç³»ç»Ÿè­¦å‘Šå€¼":+14,"å¤ªå­å¥½æ„Ÿ":+8},route:{romance:+12,power:+8,dark:+20},
  story:`ä½ æŒ‘èµ·ä»–ä¸‹å·´ï¼šâ€œæ®¿ä¸‹æ•¢ä¸æ•¢æŠŠæˆ‘æŠ¤åˆ°åº•ï¼Ÿâ€

å¤ªå­çœ¼åº•æš—åˆ°å‘çƒ«ï¼šâ€œä½ åˆ«åæ‚”ã€‚â€

ä½ ç¬‘ï¼šâ€œåæ‚”ï¼Ÿæˆ‘åªåæ‚”æ€å¾—ä¸å¤Ÿå¤§ã€‚â€`},
 {id:"15D",tag:["å…»æˆ","ä½é£é™©"],speaker:"you",text:"ä½ å…ˆä¸çˆ±ï¼šä½ è¦å…ˆèµ¢ã€‚",effect:{"å¿ƒæ™º":+4,"ç³»ç»Ÿè­¦å‘Šå€¼":-2},route:{romance:+2,power:+14,dark:+0},
  story:`ä½ æŠŠæƒ…ç»ªå‹ä¸‹å»ï¼šâ€œç­‰æˆ‘èµ¢äº†ï¼Œå†è°ˆå¿ƒã€‚â€

å¤ªå­æ²‰é»˜ç‰‡åˆ»ï¼šâ€œå¥½ã€‚â€

ä½ å¬è§ç³»ç»Ÿå’¬ç‰™ï¼šå®ƒæœ€æ€•ä½ æ¸…é†’ã€‚`},
]],
    [16,"ç»ˆå±€é“ºå«",
`ä¸ç›¸åºœå¼€å§‹åæ‰‘ï¼Œç”šè‡³è¦ç‰µè¿å°†å†›åºœã€‚

ç³»ç»Ÿæç¤ºï¼š
ã€ç»ˆå±€å€’è®¡æ—¶å¼€å§‹ã€‚ã€‘`,
[
 {id:"16A",tag:["ç”œå® ","ä¸­é£é™©"],speaker:"prince",text:"å¤ªå­æŠ¤ä½ æŠ¤åˆ°æ˜å¤„ï¼šä½ æˆä¸ºä»–çš„è½¯è‚‹ã€‚",effect:{"å¤ªå­å¥½æ„Ÿ":+8,"å®¶æ—å£°æœ›":+2},route:{romance:+16,power:+2,dark:+0},flags:{princeProtected:true},
  story:`å¤ªå­åœ¨æœä¸Šæ›¿å°†å†›åºœè¯´è¯ã€‚

æœ‰äººå˜²ä»–æƒ…æ·±ï¼Œä»–åªå†·å£°ï¼šâ€œå­¤æŠ¤çš„äººï¼Œè½®ä¸åˆ°ä½ ä»¬è®®ã€‚â€

ä½ å¿½ç„¶æ„è¯†åˆ°ï¼šä½ æˆäº†ä»–çš„è½¯è‚‹ï¼Œä¹Ÿæˆäº†ä»–çš„ç›”ç”²ã€‚`},
 {id:"16B",tag:["æƒè°‹","ä¸­é£é™©"],speaker:"you",text:"ä½ ä¸»åŠ¨çŒ®è®¡ï¼šç”¨ä¸ç›¸åºœæ—§è´¦ä¸€åˆ€å°å–‰ã€‚",effect:{"è°‹ç•¥":+5,"å®¶æ—å£°æœ›":+4},route:{romance:+0,power:+20,dark:+2},flags:{finalPlan:true},
  story:`ä½ é€’ä¸Šâ€œæ—§è´¦å†Œâ€ï¼šè´ªå¢¨ã€ç§ç›ã€æš—çº¿â€”â€”æ¡æ¡è‡´å‘½ã€‚

å¤ªå­çœ‹ä½ ï¼šâ€œä½ è¦ä»–ä»¬æ­»ï¼Ÿâ€

ä½ ç­”ï¼šâ€œæˆ‘è¦ä»–ä»¬å†ä¹Ÿä¸èƒ½çˆ¬èµ·æ¥ã€‚â€`},
 {id:"16C",tag:["æ€æ¡Œ","é«˜é£é™©"],speaker:"you",highlight:true,text:"ä½ ç›´æ¥é»‘åŒ–ï¼šä½ è¦å…¨åŸä¸ºä½ æ”¹è§„åˆ™ã€‚",effect:{"æ€æ¡Œå€¼":+12,"åç¦»åº¦":+8,"ç³»ç»Ÿè­¦å‘Šå€¼":+16},route:{romance:+2,power:+10,dark:+22},
  story:`ä½ å†·ç¬‘ï¼šâ€œæˆ‘ä¸æƒ³èµ¢ï¼Œæˆ‘æƒ³è®©è§„åˆ™æ”¹å§“ã€‚â€

ç³»ç»Ÿè­¦æŠ¥ç–¯ç‹‚ï¼Œä½ å´æ›´å…´å¥‹ï¼šè¦ä¹ˆä½ å´©ï¼Œè¦ä¹ˆå®ƒå´©ã€‚`},
 {id:"16D",tag:["å…»æˆ","ä½é£é™©"],speaker:"you",text:"ç¨³ä½è¡€æ¡ï¼šå‡†å¤‡ç¡¬æ‰›å¼ºæƒ©ç½šã€‚",effect:{"å¥åº·":+4,"å¿ƒæ™º":+4,"ç³»ç»Ÿè­¦å‘Šå€¼":-2},route:{romance:+2,power:+12,dark:+0},
  story:`ä½ æŠŠèº«ä½“ä¸å¿ƒæ™ºå †æ»¡ã€‚

ä½ å¾ˆæ¸…æ¥šï¼šç»ˆå±€æ—¶ï¼Œæ´»ä¸‹å»ä¹Ÿæ˜¯ä¸€ç§èƒœåˆ©ã€‚`},
]],
    [17,"ä¸ç›¸åºœå è½",
`ä½ ç»ˆäºæŠŠä¸ç›¸åºœæ¨åˆ°æ‚¬å´–è¾¹ã€‚

è‹æ¸…è²ä¹Ÿè¢«é€¼åˆ°è§’è½ã€‚

å¥¹å¼€å§‹ç–¯ç‹‚ã€‚`,
[
 {id:"17A",tag:["ç”œå® ","ä¸­é£é™©"],speaker:"prince",text:"å¤ªå­æŠŠä½ æŠ¤åœ¨èº«åï¼šä½ åªè´Ÿè´£å‘å‰ã€‚",effect:{"å¤ªå­å¥½æ„Ÿ":+8,"å¿ƒæ™º":+2},route:{romance:+14,power:+4,dark:+0},
  story:`å¤ªå­æ‹¦ä½æ‰€æœ‰æµç®­ï¼šâ€œä½ åªç®¡å‘å‰ã€‚â€

ä½ å¿½ç„¶å¾ˆæƒ³ç¬‘ï¼šåŸè‘—é‡Œä½ ä¼šè¢«ä»–å†·çœ¼æ—è§‚ã€‚

ç°åœ¨ï¼Œä»–æŒ¡åœ¨ä½ å‰é¢ã€‚`},
 {id:"17B",tag:["æƒè°‹","ä¸­é£é™©"],speaker:"you",text:"ä½ äº²æ‰‹æ”¶ç½‘ï¼šè®©å¥¹æ— è·¯å¯é€ƒã€‚",effect:{"è°‹ç•¥":+4,"è‹æ¸…è²æ€€ç–‘":+5},route:{romance:+0,power:+18,dark:+3},flags:{suDown:true},
  story:`ä½ æ”¶ç´§è¯æ®é“¾ï¼šå†…ä¾ä¾›è¯ã€è´¦å†Œã€åŒ£çº¹å°è®°â€”â€”ä¸€æ¡æ¡é’‰æ­»ã€‚

è‹æ¸…è²ç¬¬ä¸€æ¬¡çœŸæ­£å®³æ€•ï¼šå¥¹çŸ¥é“è‡ªå·±è¦æ­»äº†ã€‚`},
 {id:"17C",tag:["æ€æ¡Œ","é«˜é£é™©"],speaker:"you",highlight:true,text:"ä½ ç»™å¥¹æœ€åä¸€åˆ€ï¼šè®©å¥¹åœ¨ä¼—äººé¢å‰å´©æºƒã€‚",effect:{"æ€æ¡Œå€¼":+12,"åç¦»åº¦":+8,"ç³»ç»Ÿè­¦å‘Šå€¼":+14,"è´µå¥³å£°æœ›":-2},route:{romance:+1,power:+10,dark:+22},flags:{suDown:true},
  story:`ä½ å½“ä¼—æ­ç©¿å¥¹æ¯ä¸€æ¬¡â€œæ— å¿ƒâ€ã€‚

å¥¹ç»ˆäºå¤±æ§å°–å«ï¼Œç™½è²çš®å½»åº•ç¢æˆæ³¥ã€‚

ä½ å¬è§ç³»ç»Ÿçš„å£°éŸ³ä¹Ÿåœ¨æŠ–ã€‚`},
 {id:"17D",tag:["å…»æˆ","ä½é£é™©"],speaker:"you",text:"ä¸è¡¥åˆ€ï¼šè®©å¥¹åœ¨ææƒ§é‡Œè‡ªæ¯ã€‚",effect:{"å¿ƒæ™º":+3,"ç³»ç»Ÿè­¦å‘Šå€¼":-2},route:{romance:+2,power:+12,dark:+0},
  story:`ä½ ä¸è¡¥åˆ€ã€‚

ä½ è®©ææƒ§ä¸€ç‚¹ç‚¹å•ƒæ‰å¥¹çš„ç¥æ™ºâ€”â€”é‚£æ¯”æ­»æ›´ç—›ã€‚`},
]],
    [18,"ç³»ç»Ÿå´©è£‚",
`ç³»ç»Ÿå¼€å§‹å‡ºç°å¼‚å¸¸æç¤ºã€å¡é¡¿ã€é‡å¤æŠ¥é”™ã€‚

ã€ä¿®æ­£å¤±è´¥â€¦å¤±è´¥â€¦ã€‘

ä½ ç¬¬ä¸€æ¬¡çœ‹è§å®ƒâ€œåƒäººä¸€æ ·æ…Œâ€ã€‚`,
[
 {id:"18A",tag:["ç”œå® ","ä¸­é£é™©"],speaker:"prince",text:"ä½ é åœ¨ä»–è‚©ä¸Šï¼šç”¨çˆ±ç¨³å®šä¸–ç•Œçº¿ã€‚",effect:{"å¤ªå­å¥½æ„Ÿ":+10,"ç³»ç»Ÿè­¦å‘Šå€¼":-2},route:{romance:+18,power:+2,dark:+0},
  story:`ä½ è½»å£°ï¼šâ€œåˆ«è®©å®ƒæŠŠæˆ‘æ‹–å›å»ã€‚â€

å¤ªå­æ¡ä½ä½ æ‰‹ï¼šâ€œæœ‰å­¤åœ¨ã€‚â€

ç³»ç»Ÿåƒè¢«ä¸€æ‹³æ‰“åœ¨èƒ¸å£ï¼šå®ƒè®¨åŒâ€œç¡®å®šçš„å…³ç³»â€ã€‚`},
 {id:"18B",tag:["æƒè°‹","ä¸­é£é™©"],speaker:"you",text:"ä½ åˆ©ç”¨ç³»ç»Ÿæ¼æ´ï¼šè®©å®ƒæƒ©ç½šè‡ªå·±ã€‚",effect:{"è°‹ç•¥":+5,"ç³»ç»Ÿè­¦å‘Šå€¼":-4,"åç¦»åº¦":+2},route:{romance:+0,power:+18,dark:+6},flags:{systemCrack:true},
  story:`ä½ æ•…æ„å¡å®ƒçš„è§¦å‘æ¡ä»¶ï¼šè®©å®ƒä¸æ–­è¯¯åˆ¤ã€‚

å®ƒæ¯è¯¯åˆ¤ä¸€æ¬¡ï¼Œä¿®æ­£åŠ›å°±æ¶ˆè€—ä¸€æ¬¡ã€‚

ä½ çœ‹ç€å®ƒå–˜ï¼šåŸæ¥å®ƒä¹Ÿä¼šç´¯ã€‚`},
 {id:"18C",tag:["æ€æ¡Œ","é«˜é£é™©"],speaker:"you",highlight:true,text:"ä½ ç›´æ¥æŒ‘æˆ˜ç³»ç»Ÿï¼šâ€˜æ¥ï¼ŒæŠŠæˆ‘é€å›åŸè‘—å•Šã€‚â€™",effect:{"æ€æ¡Œå€¼":+14,"åç¦»åº¦":+10,"ç³»ç»Ÿè­¦å‘Šå€¼":+10},route:{romance:+0,power:+8,dark:+26},
  story:`ä½ åœ¨å¿ƒé‡Œè¯´ï¼šâ€œæ¥ï¼ŒæŠŠæˆ‘é€å›åŸè‘—ã€‚â€

ç³»ç»Ÿæ²‰é»˜å¾ˆä¹…ï¼Œåªå›äº†ä¸€å¥ï¼š
ã€æƒé™ä¸è¶³ã€‚ã€‘

ä½ ç¬‘å‡ºå£°ï¼šå®ƒä¸å†æ— æ•Œã€‚`},
 {id:"18D",tag:["å…»æˆ","ä½é£é™©"],speaker:"you",text:"ç¨³ä½çŠ¶æ€ï¼šåˆ«è¢«æœ€åä¸€æ³¢åå™¬æ‹–æ­»ã€‚",effect:{"å¥åº·":+4,"å¿ƒæ™º":+4},route:{romance:+2,power:+10,dark:+0},
  story:`ä½ ä¸æµªã€‚ä½ æŠŠè¡€æ¡å †æ»¡ã€‚

ä½ çŸ¥é“ç»ˆå±€å‰ï¼Œç¿»è½¦æœ€å®¹æ˜“å‘ç”Ÿã€‚`},
]],
    [19,"æœ€åçš„é€‰æ‹©",
`ç»ˆå±€å‰å¤œï¼Œå¤ªå­é—®ä½ ï¼šâ€œæ˜æ—¥ä¹‹åï¼Œä½ æƒ³æˆä¸ºä»€ä¹ˆï¼Ÿâ€

ç³»ç»Ÿä¸å†åŠä½ å›å¤´ï¼Œå®ƒå¼€å§‹å¨èƒï¼š
ã€è¯·å®¿ä¸»è°¨æ…ã€‚ã€‘`,
[
 {id:"19A",tag:["ç”œå® ","ä¸­é£é™©"],speaker:"prince",text:"ä½ è¦ä¸ä»–å¹¶è‚©ï¼šæˆå‡¤ä¹Ÿæˆä¼´ã€‚",effect:{"å¤ªå­å¥½æ„Ÿ":+12,"è´µå¥³å£°æœ›":+3},route:{romance:+22,power:+2,dark:+0},
  story:`ä½ è¯´ï¼šâ€œæˆ‘æƒ³ä¸ä½ å¹¶è‚©â€”â€”ä¸æ˜¯é™„å±ã€‚â€

å¤ªå­ä½å£°ï¼šâ€œå¥½ã€‚â€

ä½ å¿½ç„¶è§‰å¾—ï¼ŒåŸè‘—é‡Œé‚£æ¡æ­»è·¯ï¼Œè¢«ä½ æ”¹æˆäº†å½’é€”ã€‚`},
 {id:"19B",tag:["æƒè°‹","ä¸­é£é™©"],speaker:"you",text:"ä½ è¦ç™»é¡¶ï¼šæŠŠæ‰€æœ‰äººå½“æ£‹ã€‚",effect:{"è°‹ç•¥":+5,"å®¶æ—å£°æœ›":+4,"åç¦»åº¦":+2},route:{romance:-2,power:+24,dark:+4},
  story:`ä½ è¯´ï¼šâ€œæˆ‘è¦ç™»é¡¶ã€‚â€

å¤ªå­çœ‹ä½ ï¼šâ€œä½ ä¼šå¾ˆå­¤ã€‚â€

ä½ ç¬‘ï¼šâ€œå­¤ä¸å­¤ä¸é‡è¦ï¼Œé‡è¦çš„æ˜¯â€”â€”æˆ‘èµ¢ã€‚â€`},
 {id:"19C",tag:["æ€æ¡Œ","é«˜é£é™©"],speaker:"you",highlight:true,text:"ä½ è¦ç ´å±€ï¼šè®©ä¸–ç•Œçº¿å½»åº•æ”¹å†™ã€‚",effect:{"æ€æ¡Œå€¼":+14,"åç¦»åº¦":+10,"ç³»ç»Ÿè­¦å‘Šå€¼":+14},route:{romance:+0,power:+10,dark:+28},
  story:`ä½ è¯´ï¼šâ€œæˆ‘è¦æŠŠè¿™æœ¬ä¹¦æ’•äº†ã€‚â€

å¤ªå­æ²‰é»˜å¾ˆä¹…ï¼šâ€œä½ ä¼šä»˜å‡ºä»£ä»·ã€‚â€

ä½ ç­”ï¼šâ€œæˆ‘æ—©å°±ä¸æ€•ä»£ä»·äº†ã€‚â€`},
 {id:"19D",tag:["å…»æˆ","ä½é£é™©"],speaker:"you",text:"ä½ è¦æ´»ï¼šä¸ç®¡æ€ä¹ˆèµ¢ï¼Œå…ˆæ´»ä¸‹æ¥ã€‚",effect:{"å¥åº·":+4,"å¿ƒæ™º":+4,"ç³»ç»Ÿè­¦å‘Šå€¼":-2},route:{romance:+4,power:+12,dark:+0},
  story:`ä½ è¯´ï¼šâ€œæˆ‘åªæƒ³å…ˆæ´»ã€‚â€

å¤ªå­è½»è½»ç‚¹å¤´ï¼šâ€œæ´»ç€ï¼Œæ‰æœ‰æ˜å¤©ã€‚â€

ç³»ç»Ÿåƒè¢«å µä½å˜´ï¼šå®ƒæœ€æ€•ä½ æŠŠâ€œæ´»â€å½“èƒœåˆ©ã€‚`},
]],
    [20,"ç»ˆå±€Â·æ¸…ç®—",
`æœ€åä¸€æ—¥ã€‚

è¯æ®é“¾æ”¶ç½‘ï¼Œä¸ç›¸åºœä¸è‹æ¸…è²çš„ç½ªåå³å°†è½ä¸‹ã€‚

ç³»ç»Ÿå‘å‡ºæœ€åé€šç‰’ï¼š
ã€è‹¥å®¿ä¸»ç»§ç»­åç¦»ï¼Œå°†æŠ•æ”¾æœ€ç»ˆæƒ©ç½šã€‚ã€‘

ä½ æŠ¬çœ¼â€”â€”ä½ ä¸å†æ˜¯åŸè‘—å¥³é…ã€‚

ä½ æ˜¯å†™å‰§æœ¬çš„äººã€‚`,
[
 {id:"20A",tag:["ç”œå® ","é«˜é£é™©"],speaker:"prince",highlight:true,text:"ä½ è®©å¤ªå­å…¬å¼€è¿ä½ ï¼šç»“å±€èµ°å‘ã€Œæ€æ¡Œæˆå‡¤ã€ã€‚",effect:{"å¤ªå­å¥½æ„Ÿ":+10,"ç³»ç»Ÿè­¦å‘Šå€¼":+2},route:{romance:+30,power:+4,dark:+0},flags:{endingTrigger:true},
  story:`å¤ªå­å½“ä¼—å®£æ—¨ï¼šâ€œæŸ³æ‰¶é£ï¼Œå…¥ä¸œå®«ä¸ºæ­£ã€‚â€

ä½ çœ‹è§è‹æ¸…è²å½»åº•å¤±è‰²ã€‚

ä½ ä¼¸æ‰‹æ¡ä½å¤ªå­æŒå¿ƒï¼šè¿™ä¸€å›ï¼Œä½ ä¸æ˜¯è¢«é€‰ï¼Œä½ æ˜¯è‡ªå·±èµ°åˆ°è¿™é‡Œã€‚`},
 {id:"20B",tag:["æƒè°‹","é«˜é£é™©"],speaker:"you",highlight:true,text:"ä½ äº²æ‰‹å®šç½ªï¼šç»“å±€èµ°å‘ã€Œå¥³é…ç™»é¡¶ã€ã€‚",effect:{"è°‹ç•¥":+6,"å®¶æ—å£°æœ›":+4,"åç¦»åº¦":+3},route:{romance:-2,power:+30,dark:+6},flags:{endingTrigger:true},
  story:`ä½ æŠŠæœ€åä¸€ä»½è¯æ®é€’ä¸Šã€‚

ä¸ç›¸åºœå€’å¡Œï¼Œæœå ‚éœ‡åŠ¨ã€‚

ä½ ç«™åœ¨é£æš´ä¸­å¿ƒï¼Œç¬‘å¾—å¾ˆè½»ï¼šä½ ç»ˆäºæŠŠâ€œå¥³é…â€ä¸¤ä¸ªå­—ï¼Œå˜æˆäº†â€œèµ¢å®¶â€ã€‚`},
 {id:"20C",tag:["ç ´å±€","æé«˜é£é™©"],speaker:"you",highlight:true,text:"ä½ å½“ä¼—å¯¹æŠ—ç³»ç»Ÿï¼šç»“å±€èµ°å‘ã€Œä¸–ç•Œçº¿ç ´åè€…ã€ã€‚",effect:{"æ€æ¡Œå€¼":+20,"åç¦»åº¦":+12,"ç³»ç»Ÿè­¦å‘Šå€¼":+18},route:{romance:+0,power:+10,dark:+36},flags:{endingTrigger:true},
  story:`ä½ æŠ¬å¤´ï¼Œåƒå¯¹å¤©ç©ºè¯´è¯ï¼šâ€œæˆ‘æ‹’ç»è¢«å†™æ­»ã€‚â€

ç³»ç»Ÿç–¯ç‹‚æŠ¥é”™ï¼Œæƒ©ç½šå…‰æ•ˆåƒæ½®æ°´æ‰‘æ¥ã€‚

ä½ å´ç¬‘ï¼šæ¥å•Šâ€”â€”è®©æˆ‘çœ‹çœ‹è°å…ˆç¢ã€‚`},
 {id:"20D",tag:["ç¨³å¦¥","ä¸­é£é™©"],speaker:"you",text:"ä½ é€‰æ‹©ä¿å‘½ä¸ä½“é¢æ”¶å°¾ï¼šæ™®é€šç»“å±€ä¹Ÿèƒ½èµ¢ã€‚",effect:{"å¥åº·":+3,"å¿ƒæ™º":+3},route:{romance:+6,power:+10,dark:+0},flags:{endingTrigger:true},
  story:`ä½ ä¸è¿½æ±‚æœ€æç«¯çš„èƒœåˆ©ã€‚

ä½ è®©è‹æ¸…è²è¢«å¤„ç†ï¼Œè®©å®¶æ—å®‰ç¨³ï¼Œè®©è‡ªå·±æ´»å¾—å¾ˆé•¿ã€‚

ä½ æ˜ç™½ï¼šæ´»ç€ï¼Œæ‰èƒ½æŒç»­æ€æ¡Œã€‚`},
]],
  ];

  days.forEach(([d,title,intro,opts])=>{
    Plot[d]=D(d,title,intro,opts);
  });
})();

/* =========================
   5) å¼•æ“çŠ¶æ€
========================= */
const State = {
  day: 1,
  phase: "CHOOSE", // CHOOSE -> RESOLVE -> (ENDTURN) -> CHOOSE
  player: {
    é£å: 92,
    è°‹ç•¥: 78,
    å¿ƒæ™º: 74,
    å¥åº·: 88,
    æ€æ¡Œå€¼: 0,
    åç¦»åº¦: 0,
    è´µå¥³å£°æœ›: 85,
    å®¶æ—å£°æœ›: 95,
    ç³»ç»Ÿè­¦å‘Šå€¼: 0,
    "å¤ªå­å¥½æ„Ÿ": 0,
    "è‹æ¸…è²æ€€ç–‘": 0,
  },
  routes: { romance:0, power:0, dark:0 },
  buffs: { noPunishOnce:false, actor:false, iron:false, nextIntelBoost:false, lux:false },
  flags: {
    mainDone:false,
    punishedOnce:false,
    boughtOnce:false,
    ended:false,
    // evidence
    hasEvidenceHint:false,
    hasEvidence:false,
    evidenceStep:0,
    // prince
    princeProtected:false,
    princeInvolved:false,
    // system
    systemCrack:false,
    // ending
    endingTrigger:false,
  },
  achievements: {}, // id:true
  ui: { activeChar:"you" }
};

/* =========================
   6) æ¸²æŸ“
========================= */
const flash = $("flash");
const cards = [$("cardStory"),$("cardAction"),$("cardStats"),$("cardSystem")];

function renderSubtitle(){
  const dayPlot = Plot[State.day];
  const t = dayPlot?.title || `ç¬¬${State.day}æ—¥`;
  $("subtitle").innerHTML = `ã€Œ${t}ã€ <span class="small">ï¼ˆDay1-20ï¼šç”œå® /æƒè°‹/é»‘åŒ–/ç¨³å¦¥å¤šè·¯çº¿ï¼‰</span>`;
}

function renderStats(){
  const statBox = $("stats");
  statBox.innerHTML="";
  const P = State.player;
  const rows = [
    ["é£å", P.é£å], ["è°‹ç•¥", P.è°‹ç•¥], ["å¿ƒæ™º", P.å¿ƒæ™º], ["å¥åº·", P.å¥åº·],
    ["æ€æ¡Œå€¼", P.æ€æ¡Œå€¼], ["åç¦»åº¦", P.åç¦»åº¦],
    ["è´µå¥³å£°æœ›", P.è´µå¥³å£°æœ›], ["å®¶æ—å£°æœ›", P.å®¶æ—å£°æœ›],
    ["ç³»ç»Ÿè­¦å‘Šå€¼", P.ç³»ç»Ÿè­¦å‘Šå€¼],
    ["å¤ªå­å¥½æ„Ÿ", P["å¤ªå­å¥½æ„Ÿ"]], ["è‹æ¸…è²æ€€ç–‘", P["è‹æ¸…è²æ€€ç–‘"]],
  ];
  rows.forEach(([k,v])=>{
    const pct = clamp(v,0,100);
    const el=document.createElement("div");
    el.className="stat";
    el.innerHTML = `<b>${k}</b><div class="bar"><div class="fill" style="width:${pct}%"></div></div><span class="val">${v}</span>`;
    statBox.appendChild(el);
  });
}

function renderSystem(extra=""){
  const P = State.player;
  const warn=P["ç³»ç»Ÿè­¦å‘Šå€¼"];
  let badge=`<span class="badge badge-ok">ç›‘æ§æ­£å¸¸</span>`;
  if(warn>=70) badge=`<span class="badge badge-bad">é«˜å±</span>`;
  else if(warn>=35) badge=`<span class="badge badge-warn">è­¦æƒ•</span>`;

  const routeTxt = `ç”œå® :${State.routes.romance}ï½œæƒè°‹:${State.routes.power}ï½œé»‘åŒ–:${State.routes.dark}`;

  $("system").innerHTML = `
    <div class="sysRow"><span>ğŸ“… å›åˆ</span><b>ç¬¬ ${State.day} æ—¥</b></div>
    <div class="sysRow"><span>ğŸ‘ è­¦å‘Šç­‰çº§</span>${badge}</div>
    <div class="small">${extra || "ç³»ç»Ÿæ­£åœ¨åˆ†æä½ çš„â€˜äººè®¾ä¸€è‡´æ€§â€™â€¦"}</div>
    <div class="hr"></div>
    <div class="sysRow"><span>ğŸ§­ è·¯çº¿å€¾å‘</span><b>${routeTxt}</b></div>
    <div class="small">ç»“å±€åœ¨ Day20 ç»“ç®—ï¼šç”œå®  / ç™»é¡¶ / ç ´å±€ / æ™®é€š</div>
  `;
}

function renderOptions(){
  const optionBox = $("options");
  optionBox.innerHTML="";
  const dayPlot = Plot[State.day];
  if(!dayPlot){
    optionBox.innerHTML = `<div class="small">å‰§æƒ…å·²ç»“æŸæˆ–ç¼ºå¤±ã€‚è¯·æ£€æŸ¥ Plot æ˜¯å¦åŒ…å«è¯¥å¤©ã€‚</div>`;
    return;
  }
  const ops = dayPlot.options(State);

  ops.forEach(op=>{
    const div=document.createElement("div");
    div.className="option";
    if(op.highlight) div.classList.add("highlight");

    const tag1 = op.tag?.[0] || "è¡ŒåŠ¨";
    const tag2 = op.tag?.[1] || "æœªçŸ¥";
    const cls1 = (tag1==="ä¸»çº¿"||tag1==="ç”œå® ") ? "tag-main" : (tag1==="æ€æ¡Œ"||tag1==="ç ´å±€") ? "tag-risk" : (tag1==="æƒè°‹" ? "tag-warn":"tag-safe");
    const cls2 = tag2.includes("é«˜")||tag2.includes("æ") ? "tag-risk" : (tag2.includes("ä¸­") ? "tag-warn" : "tag-safe");

    div.innerHTML = `
      <span class="tag ${cls1}">${tag1}</span>
      <span class="tag ${cls2}">${tag2}</span>
      <div style="margin-top:6px">${op.text || "è¡ŒåŠ¨"}</div>
    `;
    div.onclick = ()=>applyAction(op);
    optionBox.appendChild(div);
  });
}

function renderShop(){
  $("shopMoney").innerHTML = `å½“å‰æ€æ¡Œå€¼ï¼š<b style="color:var(--accent)">${State.player.æ€æ¡Œå€¼}</b> ï½œè¢«åŠ¨ï¼š${
    Object.entries(State.buffs).filter(([k,v])=>v && !k.startsWith("next")).map(([k])=>k).join(", ") || "æ— "
  }`;
  const shopGrid = $("shopGrid");
  shopGrid.innerHTML="";
  Shop.forEach(item=>{
    const can = State.player.æ€æ¡Œå€¼ >= item.price;
    const el=document.createElement("div");
    el.className="item";
    el.innerHTML = `
      <h4>${item.name}</h4>
      <div class="meta"><span class="price">-${item.price} æ€æ¡Œå€¼</span><span>${can ? "å¯è´­ä¹°" : "ä½™é¢ä¸è¶³"}</span></div>
      <div class="desc">${item.desc}</div>
      <div class="row">
        <button class="btn" ${can ? "" : "disabled"}>è´­ä¹°å¹¶ä½¿ç”¨</button>
        <span class="small">ID: ${item.id}</span>
      </div>
    `;
    el.querySelector("button").onclick = ()=>purchase(item.id);
    shopGrid.appendChild(el);
  });
}

function renderAchievements(){
  const list = $("achList");
  const lines = Achievements.map(a=>{
    const ok = !!State.achievements[a.id];
    const mark = ok ? "âœ…" : "â¬œ";
    return `${mark} ã€${a.name}ã€‘${a.desc}`;
  });
  list.innerText = lines.join("\n");
}

/* =========================
   7) æ ¸å¿ƒé€»è¾‘ï¼šå±æ€§/è·¯çº¿/æˆå°±/æƒ©ç½š/æ¨è¿›
========================= */
function applyDelta(delta){
  Object.entries(delta || {}).forEach(([k,v])=>{
    if(!(k in State.player)) return;
    const before=State.player[k];
    State.player[k]=clamp(before+v,0,100);
    const sign=v>0?"+":"";
    tip(`${k} ${sign}${v}`, v>0 ? "good" : (v<0 ? "bad" : "warn"));
  });
}

function applyRoute(route){
  if(!route) return;
  Object.entries(route).forEach(([k,v])=>{
    if(!(k in State.routes)) return;
    State.routes[k]=clamp(State.routes[k]+v,0,999);
  });
}

function unlockAchievements(){
  let gotOne = false;
  Achievements.forEach(a=>{
    if(State.achievements[a.id]) return;
    try{
      if(a.check(State)){
        State.achievements[a.id]=true;
        gotOne=true;
        tip(`æˆå°±è§£é”ï¼š${a.name}`, "warn");
      }
    }catch(e){}
  });
  if(gotOne) saveGame(true);
}

function punish(level=1, reason="åç¦»/ä¿®æ­£"){
  if(State.buffs.noPunishOnce){
    State.buffs.noPunishOnce=false;
    tip("å±è”½ç¬¦ç”Ÿæ•ˆï¼šå…ä¸€æ¬¡æƒ©ç½š", "warn");
    renderSystem("ã€å±è”½ç¬¦ã€‘å·²æ¶ˆè€—ï¼šç³»ç»ŸçŸ­æš‚å¤±æ˜ã€‚");
    return;
  }

  // æ¼”æŠ€å¤§å¸ˆï¼šé™ä½è§¦å‘æ¦‚ç‡
  if(State.buffs.actor && Math.random() < 0.35){
    tip("æ¼”æŠ€å¤§å¸ˆï¼šä½ éª—è¿‡ç³»ç»Ÿä¸€æ¬¡", "warn");
    return;
  }

  flash.classList.add("on");
  cards.forEach(c=>c.classList.add("shake"));
  setTimeout(()=>{
    flash.classList.remove("on");
    cards.forEach(c=>c.classList.remove("shake"));
  }, 520);

  let base = level===1 ? 3 : level===2 ? 7 : 12;
  if(State.buffs.iron) base = Math.max(1, base-1);

  const dMind = -base;
  const dHp = -Math.max(1, Math.floor(base/2));
  const dWarn = +(level===1 ? 12 : level===2 ? 22 : 35);

  applyDelta({å¿ƒæ™º:dMind, å¥åº·:dHp, "ç³»ç»Ÿè­¦å‘Šå€¼":dWarn});
  tip(`ç³»ç»Ÿæƒ©ç½šï¼š${reason}`, "bad");
  State.flags.punishedOnce = true;
}

function purchase(id){
  const item = Shop.find(x=>x.id===id);
  if(!item) return;
  if(State.player.æ€æ¡Œå€¼ < item.price) return;
  State.player.æ€æ¡Œå€¼ -= item.price;
  item.apply(State);
  State.flags.boughtOnce = true;
  tip(`è´­ä¹°æˆåŠŸï¼š${item.name}`, "good");
  renderShop();
  renderStats();
  unlockAchievements();
  saveGame(true);
}

/* å…³é”®ï¼šä½ ä¹‹å‰â€œè¿›ä¸äº†ç¬¬äºŒå¤©â€çš„æ ¸å¿ƒåŸå› å°±æ˜¯ç¼ºè¿™æ®µå®Œæ•´æ¨è¿›é€»è¾‘ */
function applyAction(op){
  if(State.phase!=="CHOOSE") return;

  State.phase="RESOLVE";
  setActive(op.speaker || "you");

  // ä¸€æ¬¡æ€§buffï¼šæƒ…æŠ¥çº¿äºº
  if(State.buffs.nextIntelBoost){
    State.buffs.nextIntelBoost=false;
    applyDelta({è°‹ç•¥:+3});
    tip("æƒ…æŠ¥çº¿äººï¼šè°‹ç•¥åŠ æˆè§¦å‘", "warn");
  }

  // äººè„‰ï¼šç¤¾äº¤é¢å¤–åŠ æˆï¼ˆè¿™é‡ŒæŠŠâ€œç”œå® /æƒè°‹â€ä¸ç®—ç¤¾äº¤ï¼Œä½ è¦çš„è¯å¯å†æ‰©ï¼‰
  const extra = {};
  if(State.buffs.lux && (op.tag?.[0]==="ç¤¾äº¤")){
    extra["è´µå¥³å£°æœ›"] = (extra["è´µå¥³å£°æœ›"]||0) + 2;
  }

  // æ–‡æœ¬
  typeText(op.story || "");

  // ç»“ç®—ï¼šå±æ€§ + è·¯çº¿ + flags
  applyDelta({...op.effect, ...extra});
  applyRoute(op.route);

  if(op.flags){
    Object.entries(op.flags).forEach(([k,v])=>{
      if(typeof v==="number"){
        State.flags[k] = (State.flags[k]||0) + v;
      }else{
        State.flags[k] = v;
      }
    });
  }

  // è¯æ®æ­¥æ•°è‡ªåŠ¨è½¬å…³é”®è¯æ®
  if((State.flags.evidenceStep||0) >= 3) State.flags.hasEvidence = true;

  // æƒ©ç½šé€»è¾‘ï¼šåç¦»åº¦é«˜/è­¦å‘Šå€¼é«˜ä¼šæ›´ç‹ 
  // è¿™é‡Œä¸å¼ºåˆ¶â€œä¸»çº¿keyâ€ï¼Œå› ä¸º Day1-20 æœ¬æ¥å°±æ˜¯å¤šè·¯çº¿ï¼›æˆ‘ä»¬æ”¹ä¸ºï¼šé«˜åç¦»+é«˜è­¦å‘Šæ—¶æ¦‚ç‡æƒ©ç½š
  const warn = State.player["ç³»ç»Ÿè­¦å‘Šå€¼"];
  const dev = State.player["åç¦»åº¦"];
  const p = clamp((dev/100)*0.45 + (warn/100)*0.35, 0, 0.85);

  // â€œæ€æ¡Œ/ç ´å±€â€æ›´å®¹æ˜“è§¦å‘æƒ©ç½š
  const risky = (op.tag?.[0]==="æ€æ¡Œ" || op.tag?.[0]==="ç ´å±€");
  const p2 = clamp(p + (risky ? 0.18 : 0), 0, 0.92);

  if(Math.random() < p2){
    const lvl = warn>=70 ? 2 : 1;
    punish(lvl, risky ? "é«˜é£é™©æ€æ¡Œ" : "åç¦»ä¿®æ­£");
  }

  // å¥åº·è¿‡ä½ -> å¼ºåˆ¶ä¼‘å…»ï¼ˆé˜²çŒæ­»ï¼‰
  if(State.player.å¥åº· <= 15){
    tip("å¥åº·è¿‡ä½ï¼šå¼ºåˆ¶ä¼‘å…»ï¼ˆä¸‹å›åˆï¼‰", "bad");
    State.player.å¥åº· = clamp(State.player.å¥åº· + 6, 0, 100);
    State.player.å¿ƒæ™º = clamp(State.player.å¿ƒæ™º + 4, 0, 100);
  }

  renderStats();
  renderSystem("è¡ŒåŠ¨å·²ç»“ç®—ã€‚ç‚¹å‡»ã€Œç»“æŸæœ¬å›åˆã€è¿›å…¥ä¸‹ä¸€æ—¥ã€‚");
  unlockAchievements();
  saveGame(true);
}

function endTurn(){
  if(State.phase!=="RESOLVE"){
    tip("å…ˆé€‰ä¸€ä¸ªè¡ŒåŠ¨å†ç»“æŸå›åˆ", "warn");
    return;
  }

  // Day20 åè§¦å‘ç»“å±€
  if(State.day >= 20){
    showEnding();
    State.flags.ended = true;
    unlockAchievements();
    saveGame(true);
    return;
  }

  State.day += 1;
  State.phase = "CHOOSE";

  // åˆ‡æ¢ç«‹ç»˜çŠ¶æ€ï¼ˆç®€å•åŠ¨æ€ï¼‰
  setMood("sys", State.player["ç³»ç»Ÿè­¦å‘Šå€¼"]>=70 ? "é«˜å±é”å®š" : (State.player["ç³»ç»Ÿè­¦å‘Šå€¼"]>=35 ? "è­¦æƒ•" : "ç›‘æ§ä¸­"));
  setMood("prince", State.player["å¤ªå­å¥½æ„Ÿ"]>=70 ? "æ¸©æŸ”" : (State.player["å¤ªå­å¥½æ„Ÿ"]>=40 ? "åœ¨æ„" : "å†·æ·¡"));
  setMood("su", State.flags.suDown ? "å´©æºƒ" : (State.player["è‹æ¸…è²æ€€ç–‘"]>=60 ? "ç´§å¼ " : "æ— è¾œ"));
  setMood("you", State.routes.dark>=70 ? "ç‹ è¾£" : (State.routes.power>=70 ? "å†·é™" : (State.routes.romance>=70 ? "å¿ƒåŠ¨" : "æ¸…é†’")));

  setActive("you");
  renderAll();
  typeText(Plot[State.day].intro);
}

/* =========================
   8) ç»“å±€åˆ¤å®š
========================= */
function showEnding(){
  const r = State.routes;
  const P = State.player;
  const hasE = !!State.flags.hasEvidence;
  const protectedOnce = !!State.flags.princeProtected;

  let title = "æ™®é€šç»“å±€ Â· æ´»ç€ä¹Ÿç®—èµ¢";
  let sub = "ä½ æ²¡æœ‰æŠŠä¸–ç•Œçº¿å½»åº•æ€ç¿»ï¼Œä½†ä½ æ´»ä¸‹æ¥ï¼Œå¹¶ä¸”ä¸å†æ˜¯æ€¨ç§ã€‚";
  let body = "";

  // é»‘åŒ–ç ´å±€ä¼˜å…ˆï¼ˆæœ€æç«¯ï¼‰
  if(r.dark >= 90 || (P["åç¦»åº¦"]>=80 && P["ç³»ç»Ÿè­¦å‘Šå€¼"]>=70)){
    title = "ğŸ–¤ ä¸–ç•Œçº¿ç ´åè€… Â· ä½ æŠŠå‰§æœ¬æ’•äº†";
    sub = "ç³»ç»Ÿæ¿’ä¸´å´©æºƒï¼Œä½ çš„åå­—ä¸åœ¨ä»»ä½•ç« èŠ‚é‡Œâ€”â€”ä½ å°±æ˜¯æ–°çš„ä½œè€…ã€‚";
    body =
`ç»ˆå±€é‚£ä¸€åˆ»ï¼Œç³»ç»Ÿçš„æƒ©ç½šåƒæ½®æ°´ç ¸ä¸‹ã€‚

ä½ å´ç¬‘ç€ç«™ç¨³ã€‚

ã€ä¿®æ­£å¤±è´¥â€¦â€¦å¤±è´¥â€¦â€¦ã€‘

ä½ å¬è§å®ƒåƒäººåœ¨å–˜ï¼Œåƒäººåœ¨æ±‚ã€‚

ä½ æŠ¬æ‰‹ï¼Œåƒæ€æ¡Œä¸€æ ·æ€å¼€å¤©ç©ºâ€”â€”

â€œä»ä»Šå¤©èµ·ï¼Œè§„åˆ™æ”¹å§“ã€‚â€

â€”â€”ä½ æ´»ä¸‹æ¥äº†ã€‚
â€”â€”è€Œä¸”ï¼Œä½ èµ¢å¾—å¾ˆå¹²å‡€ã€‚`;
  }
  // æƒè°‹ç™»é¡¶
  else if(r.power >= 85 && P["è°‹ç•¥"]>=80 && (P["å®¶æ—å£°æœ›"]>=70 || hasE)){
    title = "ğŸ”¥ å¥³é…ç™»é¡¶ Â· ä½ åä¸ŠæƒåŠ›ä¸­å¿ƒ";
    sub = "ä½ æŠŠæ¯ä¸€æ­¥éƒ½ç®—åˆ°æè‡´ï¼ŒæŠŠä¸ç›¸åºœä¸è‹æ¸…è²é€è¿›æ­»å±€ã€‚";
    body =
`ä½ æ²¡æœ‰é çœ¼æ³ªï¼Œä¹Ÿæ²¡æœ‰é æ–½èˆã€‚

ä½ é çš„æ˜¯ï¼šè¯æ®ã€ç­¹ç ã€æ‰‹æ®µã€‚

ä¸ç›¸åºœå€’å¡Œé‚£å¤©ï¼Œæœå ‚éœ‡åŠ¨ã€‚
æœ‰äººè¯´ä½ å†·è¡€ï¼Œæœ‰äººè¯´ä½ ç‹ æ¯’ã€‚

ä½ åªæ·¡æ·¡ä¸€ç¬‘ï¼šè¾“çš„äººæ‰éœ€è¦åå£°ã€‚

ä½ ç«™åœ¨é«˜å¤„ï¼Œä¿¯ç°å…¨åŸã€‚

â€”â€”è¿™ä¸€æ¬¡ï¼Œä½ ä¸æ˜¯å¥³é…ã€‚
â€”â€”ä½ æ˜¯èµ¢å®¶ã€‚`;
  }
  // ç”œå® æˆå‡¤
  else if(r.romance >= 85 && P["å¤ªå­å¥½æ„Ÿ"]>=70 && protectedOnce){
    title = "ğŸŒ¸ æ€æ¡Œæˆå‡¤ Â· ä½ æŠŠçˆ±ä¸æƒä¸€èµ·æ‹¿ä¸‹";
    sub = "å¤ªå­ç«™åœ¨ä½ èº«ä¾§ï¼Œä½ ä¸å†ç‹¬è¡Œï¼Œä¹Ÿä¸å†å‘å¾®ã€‚";
    body =
`ä»–åœ¨ä¼—äººé¢å‰æ¡ä½ä½ çš„æ‰‹ï¼Œè¯­æ°”å¹³é™å¾—åƒå®£å‘Šï¼š

â€œå¥¹æ˜¯å­¤çš„äººã€‚â€

ä½ æ²¡æœ‰è„¸çº¢ï¼Œä¹Ÿæ²¡æœ‰ä½å¤´ã€‚
ä½ åªæ˜¯æŠŠæ‰‹æ¡å¾—æ›´ç´§â€”â€”

ä½ ç»ˆäºæ˜ç™½ï¼Œçˆ±ä¸æ˜¯æŸç¼šã€‚
çˆ±æ˜¯ç›”ç”²ã€‚

ä»æ­¤ä»¥åï¼Œä½ åœ¨é˜³å…‰ä¸‹èµ°è·¯ï¼Œ
è€Œä¸æ˜¯åœ¨å‰§æƒ…é‡Œç­‰æ­»ã€‚

â€”â€”ä½ æ€äº†æ¡Œã€‚
â€”â€”ä¹Ÿæˆäº†å‡¤ã€‚`;
  }
  else{
    body =
`ä½ æŠŠæœ€å±é™©çš„èŠ‚ç‚¹æ’‘è¿‡å»ã€‚

ä½ æ²¡æœ‰å½»åº•æŠŠç³»ç»Ÿæ‰“ç¢ï¼Œä½†ä½ å­¦ä¼šäº†ä¸å®ƒå‘¨æ—‹ï¼›
ä½ æ²¡æœ‰æŠŠæ‰€æœ‰äººè¸©åœ¨è„šä¸‹ï¼Œä½†ä½ ä¹Ÿä¸å†è¢«ä»»ä½•äººè¸©ã€‚

ä½ æ´»å¾—ä½“é¢ï¼Œæ´»å¾—æ¸…é†’ï¼Œæ´»å¾—å¾ˆé•¿ã€‚

â€”â€”å¯¹ä¸€ä¸ªåŸè‘—å¿…æ­»çš„å¥³é…æ¥è¯´ï¼Œ
è¿™å°±æ˜¯æœ€æ¼‚äº®çš„èƒœåˆ©ã€‚`;
  }

  $("endSub").innerText = sub;
  $("endBody").innerText = `ã€ç»“å±€ã€‘${title}\n\n` + body + `\n\nï¼ˆè·¯çº¿å€¾å‘ï¼šç”œå® ${r.romance}ï½œæƒè°‹${r.power}ï½œé»‘åŒ–${r.dark}ï¼‰`;
  $("endMask").classList.add("show");
}

/* =========================
   9) å­˜æ¡£/è¯»æ¡£/æ¸…æ¡£
========================= */
const SAVE_KEY = "yx_game_save_v1";

function saveGame(silent=false){
  try{
    localStorage.setItem(SAVE_KEY, JSON.stringify(State));
    if(!silent) tip("å·²å­˜æ¡£", "good");
  }catch(e){
    if(!silent) tip("å­˜æ¡£å¤±è´¥ï¼šæµè§ˆå™¨é™åˆ¶", "bad");
  }
}

function loadGame(){
  try{
    const raw = localStorage.getItem(SAVE_KEY);
    if(!raw){ tip("æ²¡æœ‰å­˜æ¡£", "warn"); return; }
    const obj = JSON.parse(raw);

    // ç®€å•åˆå¹¶ï¼ˆé¿å…ç¼ºå­—æ®µï¼‰
    Object.assign(State, obj);
    // è§’è‰²/ç«‹ç»˜åˆ·æ–°
    setMood("sys", State.player["ç³»ç»Ÿè­¦å‘Šå€¼"]>=70 ? "é«˜å±é”å®š" : (State.player["ç³»ç»Ÿè­¦å‘Šå€¼"]>=35 ? "è­¦æƒ•" : "ç›‘æ§ä¸­"));
    setMood("prince", State.player["å¤ªå­å¥½æ„Ÿ"]>=70 ? "æ¸©æŸ”" : (State.player["å¤ªå­å¥½æ„Ÿ"]>=40 ? "åœ¨æ„" : "å†·æ·¡"));
    setMood("su", State.flags.suDown ? "å´©æºƒ" : (State.player["è‹æ¸…è²æ€€ç–‘"]>=60 ? "ç´§å¼ " : "æ— è¾œ"));
    setMood("you", State.routes.dark>=70 ? "ç‹ è¾£" : (State.routes.power>=70 ? "å†·é™" : (State.routes.romance>=70 ? "å¿ƒåŠ¨" : "æ¸…é†’")));
    setActive(State.ui.activeChar || "you");

    renderAll();
    typeText(Plot[State.day]?.intro || "è¯»æ¡£æˆåŠŸã€‚");
    tip("è¯»æ¡£æˆåŠŸ", "good");
  }catch(e){
    tip("è¯»æ¡£å¤±è´¥ï¼šæ•°æ®æŸå", "bad");
  }
}

function resetGame(){
  localStorage.removeItem(SAVE_KEY);
  location.reload();
}

/* =========================
   10) æ€»æ¸²æŸ“
========================= */
function renderAll(){
  renderSubtitle();
  renderPortraits();
  renderOptions();
  renderStats();
  renderSystem();
}

/* =========================
   11) äº‹ä»¶ç»‘å®š
========================= */
$("btnEnd").onclick = endTurn;

$("btnCustom").onclick = ()=>{
  const txt = prompt("è¾“å…¥ä½ çš„è‡ªå®šä¹‰è¡ŒåŠ¨ï¼ˆä¼šä½œä¸ºå½“å›åˆå‰§æƒ…å±•ç¤ºï¼Œä¸è‡ªåŠ¨æ”¹æ•°å€¼ï¼‰ï¼š");
  if(!txt) return;
  if(State.phase!=="CHOOSE"){ tip("æœ¬å›åˆå·²é€‰è¿‡è¡ŒåŠ¨ï¼Œå…ˆç»“æŸå›åˆ", "warn"); return; }
  applyAction({
    id:"CUS",
    tag:["è‡ªå®šä¹‰","ä¸­é£é™©"],
    speaker:"you",
    text:"è‡ªå®šä¹‰è¡ŒåŠ¨ï¼š"+txt,
    effect:{"åç¦»åº¦":+1},
    route:{romance:+1,power:+1,dark:+1},
    story:`ä½ é€‰æ‹©äº†è‡ªå®šä¹‰è¡ŒåŠ¨ï¼š\nâ€œ${txt}â€\n\nç³»ç»Ÿæ²‰é»˜äº†ä¸€ç¬ï¼Œåƒåœ¨é‡æ–°è®¡ç®—ä½ è¿™ä¸ªäººã€‚`
  });
};

$("btnShop").onclick = ()=>{ renderShop(); $("shopMask").classList.add("show"); };
$("btnCloseShop").onclick = ()=> $("shopMask").classList.remove("show");

$("btnAch").onclick = ()=>{ renderAchievements(); $("achMask").classList.add("show"); };
$("btnCloseAch").onclick = ()=> $("achMask").classList.remove("show");

$("btnSave").onclick = ()=> saveGame();
$("btnLoad").onclick = ()=> loadGame();
$("btnReset").onclick = ()=> { if(confirm("ç¡®å®šæ¸…æ¡£é‡å¼€ï¼Ÿ")) resetGame(); };

$("btnCloseEnd").onclick = ()=> $("endMask").classList.remove("show");

/* =========================
   12) å¯åŠ¨
========================= */
(function boot(){
  renderAll();
  setActive("you");
  typeText(Plot[State.day].intro);
  unlockAchievements();
})();
</script>
</body>
</html>
